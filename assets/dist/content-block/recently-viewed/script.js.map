{"version":3,"file":"content-block/recently-viewed/script.js","mappings":"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","sources":["webpack://connections/./node_modules/classnames/index.js","webpack://connections/./node_modules/js-cookie/src/js.cookie.js","webpack://connections/webpack/bootstrap","webpack://connections/webpack/runtime/compat get default export","webpack://connections/webpack/runtime/define property getters","webpack://connections/webpack/runtime/hasOwnProperty shorthand","webpack://connections/external window \"lodash\"","webpack://connections/./assets/src/content-blocks/recently-viewed/RecentlyViewedCookie.js","webpack://connections/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://connections/external window [\"wp\",\"element\"]","webpack://connections/external window [\"wp\",\"i18n\"]","webpack://connections/external window [\"wp\",\"apiFetch\"]","webpack://connections/external window [\"wp\",\"components\"]","webpack://connections/external window [\"wp\",\"url\"]","webpack://connections/./includes/blocks/components/filter-tag-selector/index.js","webpack://connections/external window [\"wp\",\"compose\"]","webpack://connections/./includes/blocks/utils/terms.js","webpack://connections/./includes/blocks/components/hierarchical-term-selector/index.js","webpack://connections/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://connections/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://connections/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://connections/external window [\"wp\",\"data\"]","webpack://connections/./includes/blocks/components/page-select/index.js","webpack://connections/./includes/blocks/components/range-control/index.js","webpack://connections/external window [\"wp\",\"htmlEntities\"]","webpack://connections/./includes/blocks/components/entry/name.js","webpack://connections/./includes/blocks/components/entry/title.js","webpack://connections/./includes/blocks/components/entry/image.js","webpack://connections/./assets/src/content-blocks/recently-viewed/RecentlyViewed.js"],"sourcesContent":["/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"lodash\"];","/**\n * External dependencies\n */\nimport * as Cookies from \"js-cookie\";\nimport { isArray, remove, take } from \"lodash\";\n\n/**\n * @return {[]}\n */\nconst getRecentlyViewed = () => {\n\n\tlet recentlyViewed = Cookies.getJSON( 'cnRecentlyViewed' );\n\n\tif ( !isArray( recentlyViewed ) ) {\n\n\t\trecentlyViewed = [];\n\t}\n\n\treturn recentlyViewed;\n}\n\n/**\n * The `cnViewing` variable is set during the `Connections_Directory/Render/Template/Single_Entry/After` action\n * by `wp_add_inline_script()` hooked to the `frontend` handle.\n *\n * NOTE: The `cnViewing` variable is JSON encoded, it must be decoded before use.\n *\n * @typedef {{postID: string, entryID: string}} cnViewing\n */\nif ( 'undefined' !== typeof cnViewing ) {\n\n\tlet recentlyViewed = getRecentlyViewed();\n\n\t// If current Entry being viewed already exists, remove it from the array.\n\tif ( 0 <= recentlyViewed.findIndex( x => x.entryID === cnViewing.entryID ) ) {\n\n\t\tremove( recentlyViewed, x => x.entryID === cnViewing.entryID );\n\t}\n\n\t// Insert the currently being viewed Entry to the head of the array.\n\trecentlyViewed.unshift( cnViewing );\n\n\tCookies.set( 'cnRecentlyViewed', take( recentlyViewed, 10 ) );\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"apiFetch\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"url\"];","/**\n * External dependencies\n */\nimport {\n\tfind,\n\tinvoke,\n\tisEmpty,\n\tmap,\n\tthrottle,\n\tunescape as unescapeString,\n\tuniqBy,\n} from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { FormTokenField } from '@wordpress/components';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Module constants\n */\nconst DEFAULT_QUERY = {\n\tper_page: -1,\n};\n\nconst MAX_TERMS_SUGGESTIONS = 20;\n\nconst isSameTermName = ( termA, termB ) => termA.toLowerCase() === termB.toLowerCase();\n\nclass FilterTagSelector extends Component {\n\n\tconstructor() {\n\n\t\tsuper( ...arguments );\n\n\t\tthis.unescapeTerm = this.unescapeTerm.bind( this );\n\t\tthis.unescapeTerms = this.unescapeTerms.bind( this );\n\t\tthis.onChange = this.onChange.bind( this );\n\t\tthis.searchTerms = throttle( this.searchTerms.bind( this ), 300 );\n\n\t\tthis.state = {\n\t\t\tloading: false,\n\t\t\tavailableTerms: [],\n\t\t\tselectedTerms: [],\n\t\t};\n\t}\n\n\t/**\n\t * Returns a term object with name unescaped.\n\t * The unescape of the name property is done using lodash unescape function.\n\t *\n\t * @param {Object} term The term object to unescape.\n\t *\n\t * @return {Object} Term object with name property unescaped.\n\t */\n\tunescapeTerm( term ) {\n\n\t\tconst { renderField } = this.props;\n\n\t\treturn {\n\t\t\t...term,\n\t\t\tunescapeName: unescapeString( term[ renderField ] ),\n\t\t};\n\t};\n\n\t/**\n\t * Returns an array of term objects with names unescaped.\n\t * The unescape of each term is performed using the unescapeTerm function.\n\t *\n\t * @param {Object[]} terms Array of term objects to unescape.\n\t *\n\t * @return {Object[]} Array of therm objects unescaped.\n\t */\n\tunescapeTerms( terms ) {\n\n\t\treturn map( terms, this.unescapeTerm );\n\t};\n\n\tcomponentDidMount() {\n\n\t\tif ( ! isEmpty( this.props.terms ) ) {\n\n\t\t\tthis.setState( { loading: false } );\n\n\t\t\tthis.initRequest = this.fetchTerms( {\n\t\t\t\tsearch: this.props.terms.join( ',' ),\n\t\t\t\tper_page: -1,\n\t\t\t} );\n\n\t\t\tthis.initRequest.then(\n\t\t\t\t() => {\n\t\t\t\t\tthis.setState( { loading: false } );\n\t\t\t\t},\n\t\t\t\t( xhr ) => {\n\t\t\t\t\tif ( xhr.statusText === 'abort' ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\n\t\tinvoke( this.initRequest, [ 'abort' ] );\n\t\tinvoke( this.searchRequest, [ 'abort' ] );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\n\t\tif ( prevProps.terms !== this.props.terms ) {\n\n\t\t\tthis.updateSelectedTerms( this.props.terms );\n\t\t}\n\t}\n\n\tfetchTerms( params = {} ) {\n\n\t\tconst { getFields, type, renderField } = this.props;\n\t\tconst query = { ...DEFAULT_QUERY, ...params, ...{_fields: getFields} };\n\t\tconst request = apiFetch( {\n\t\t\tpath: addQueryArgs( `/cn-api/v1/autocomplete/${ type }`, query ),\n\t\t} );\n\n\t\trequest.then( this.unescapeTerms ).then( ( terms ) => {\n\n\t\t\tthis.setState( ( state ) => ( {\n\t\t\t\tavailableTerms: state.availableTerms.concat(\n\t\t\t\t\tterms.filter( ( term ) => ! find( state.availableTerms, ( availableTerm ) => availableTerm[ renderField ] === term[ renderField ] ) )\n\t\t\t\t),\n\t\t\t} ) );\n\n\t\t\tthis.updateSelectedTerms( this.props.terms );\n\t\t} );\n\n\t\treturn request;\n\t}\n\n\tupdateSelectedTerms( terms = [] ) {\n\n\t\tconst { renderField, returnField } = this.props;\n\n\t\tconst selectedTerms = terms.reduce( ( result, termId ) => {\n\n\t\t\t// console.log( termId );\n\n\t\t\tconst termObject = find( this.state.availableTerms, ( term ) => term[ returnField ] === termId );\n\n\t\t\tif ( termObject ) {\n\n\t\t\t\tresult.push( termObject[ renderField ] );\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}, [] );\n\n\t\t// console.log( 'this.state.availableTerms=', this.state.availableTerms );\n\t\t// console.log( 'updateSelectedTerms::selectedTerms=', selectedTerms );\n\n\t\tthis.setState( {\n\t\t\tselectedTerms,\n\t\t} );\n\t}\n\n\tonChange( termNames ) {\n\n\t\tconst { onChange, renderField, returnField } = this.props;\n\n\t\t// console.log( 'onChange::onChange=', termNames );\n\n\t\tconst renderFieldToReturnField = ( names, availableTerms ) => {\n\t\t\treturn names\n\t\t\t\t.map( ( termName ) =>\n\t\t\t\t\tfind( availableTerms, ( term ) => isSameTermName( term[ renderField ], termName ) )[ returnField ]\n\t\t\t\t);\n\t\t};\n\n\t\t// console.log( 'termNames:', termNames );\n\n\t\tconst uniqueTerms = uniqBy( termNames, ( term ) => term.toLowerCase() );\n\n\t\tconst addTerm = uniqueTerms.filter( ( termName ) =>\n\t\t\tfind( this.state.availableTerms, ( term ) => isSameTermName( term[ renderField ], termName ) )\n\t\t);\n\n\t\t// console.log( 'addTerm:', addTerm );\n\n\t\tconst selectedTermIDs = renderFieldToReturnField( addTerm, this.state.availableTerms );\n\n\t\t// console.log( 'selectedTermIDs:', selectedTermIDs );\n\n\t\tonChange( selectedTermIDs );\n\t}\n\n\tsearchTerms( search = '' ) {\n\n\t\tinvoke( this.searchRequest, [ 'abort' ] );\n\t\tthis.searchRequest = this.fetchTerms( { search } );\n\t}\n\n\trender() {\n\n\t\tconst {\n\t\t\t      label,\n\t\t\t      messages,\n\t\t      } = this.props;\n\n\t\tconst { loading, availableTerms, selectedTerms } = this.state;\n\t\tconst termNames = availableTerms.map( ( term ) => term.unescapeName );\n\n\t\treturn (\n\t\t\t<FormTokenField\n\t\t\t\tvalue={ selectedTerms }\n\t\t\t\tsuggestions={ termNames }\n\t\t\t\tonChange={ this.onChange }\n\t\t\t\tonInputChange={ this.searchTerms }\n\t\t\t\tmaxSuggestions={ MAX_TERMS_SUGGESTIONS }\n\t\t\t\tdisabled={ loading }\n\t\t\t\tlabel={ label }\n\t\t\t\tmessages={ messages }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default FilterTagSelector;\n","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"compose\"];","/**\n * External dependencies\n */\nimport { groupBy } from 'lodash';\n\n/**\n * Returns terms in a tree form.\n *\n * Copies from WP core since it does not appear to be available in the global wp object.\n * @link https://github.com/WordPress/gutenberg/blob/master/packages/editor/src/utils/terms.js\n *\n * @param {Array} flatTerms  Array of terms in flat format.\n *\n * @return {Array} Array of terms in tree format.\n */\nexport function buildTermsTree( flatTerms ) {\n\tconst termsByParent = groupBy( flatTerms, 'parent' );\n\tconst fillWithChildren = ( terms ) => {\n\t\treturn terms.map( ( term ) => {\n\t\t\tconst children = termsByParent[ term.id ];\n\t\t\treturn {\n\t\t\t\t...term,\n\t\t\t\tchildren: children && children.length ? fillWithChildren( children ) : [],\n\t\t\t};\n\t\t} );\n\t};\n\n\treturn fillWithChildren( termsByParent[ '0' ] || [] );\n}\n","/**\n * External dependencies\n */\nimport { unescape as unescapeString, without, find, invoke, startCase } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, _n, sprintf } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { CheckboxControl, withSpokenMessages, Spinner } from '@wordpress/components';\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { buildTermsTree } from '../../utils/terms';\n\n/**\n * Module Constants\n */\nconst DEFAULT_QUERY = {\n\tper_page: -1,\n\torderby:  'name',\n\torder:    'asc',\n\t_fields:  'id,name,parent',\n};\n\nconst MIN_TERMS_COUNT_FOR_FILTER = 8;\n\nclass HierarchicalTermSelector extends Component {\n\tconstructor( ) {\n\t\tsuper( ...arguments );\n\t\tthis.findTerm = this.findTerm.bind( this );\n\t\tthis.onChange = this.onChange.bind( this );\n\t\tthis.setFilterValue = this.setFilterValue.bind( this );\n\t\tthis.sortBySelected = this.sortBySelected.bind( this );\n\t\tthis.state = {\n\t\t\tloading: true,\n\t\t\tavailableTermsTree: [],\n\t\t\tavailableTerms: [],\n\t\t\tfilterValue: '',\n\t\t\tfilteredTermsTree: [],\n\t\t};\n\t}\n\n\tonChange( termId ) {\n\n\t\tconst { onChange, terms } = this.props;\n\n\t\t// const termId   = parseInt( event.target.value, 10 );\n\t\tconst hasTerm  = terms.indexOf( termId ) !== -1;\n\t\tconst newTerms = hasTerm ? without( terms, termId ) : [ ...terms, termId ];\n\n\t\tonChange( newTerms );\n\t}\n\n\tfindTerm( terms, parent, name ) {\n\n\t\treturn find( terms, ( term ) => {\n\n\t\t\treturn ( ( ! term.parent && ! parent ) || parseInt( term.parent ) === parseInt( parent ) ) &&\n\t\t\t\tterm.name.toLowerCase() === name.toLowerCase();\n\t\t} );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.fetchTerms();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tinvoke( this.fetchRequest, [ 'abort' ] );\n\t}\n\n\tfetchTerms() {\n\n\t\tconst { taxonomy } = this.props;\n\n\t\tif ( ! taxonomy ) {\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fetchRequest = apiFetch( {\n\t\t\tpath: addQueryArgs( `/cn-api/v1/${ taxonomy }/`, DEFAULT_QUERY ),\n\t\t} );\n\n\t\tthis.fetchRequest.then(\n\t\t\t( terms ) => { // resolve\n\t\t\t\tconst availableTermsTree = this.sortBySelected( buildTermsTree( terms ) );\n\n\t\t\t\tthis.fetchRequest = null;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tloading: false,\n\t\t\t\t\tavailableTermsTree,\n\t\t\t\t\tavailableTerms: terms,\n\t\t\t\t} );\n\t\t\t},\n\t\t\t( xhr ) => { // reject\n\t\t\t\tif ( xhr.statusText === 'abort' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.fetchRequest = null;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tloading: false,\n\t\t\t\t} );\n\t\t\t}\n\t\t);\n\t}\n\n\tsortBySelected( termsTree ) {\n\n\t\tconst { terms } = this.props;\n\n\t\tconst treeHasSelection = ( termTree ) => {\n\n\t\t\tif ( terms.indexOf( termTree.id ) !== -1 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( undefined === termTree.children ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst anyChildIsSelected = termTree.children.map( treeHasSelection ).filter( ( child ) => child ).length > 0;\n\n\t\t\tif ( anyChildIsSelected ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst termOrChildIsSelected = ( termA, termB ) => {\n\n\t\t\tconst termASelected = treeHasSelection( termA );\n\t\t\tconst termBSelected = treeHasSelection( termB );\n\n\t\t\tif ( termASelected === termBSelected ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif ( termASelected && ! termBSelected ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif ( ! termASelected && termBSelected ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t};\n\n\t\ttermsTree.sort( termOrChildIsSelected );\n\n\t\treturn termsTree;\n\t}\n\n\tsetFilterValue( event ) {\n\n\t\tconst { availableTermsTree } = this.state;\n\t\tconst filterValue = event.target.value;\n\t\tconst filteredTermsTree = availableTermsTree.map( this.getFilterMatcher( filterValue ) ).filter( ( term ) => term );\n\n\t\tconst getResultCount = ( terms ) => {\n\t\t\tlet count = 0;\n\t\t\tfor ( let i = 0; i < terms.length; i++ ) {\n\t\t\t\tcount++;\n\t\t\t\tif ( undefined !== terms[ i ].children ) {\n\t\t\t\t\tcount += getResultCount( terms[ i ].children );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn count;\n\t\t};\n\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tfilterValue,\n\t\t\t\tfilteredTermsTree,\n\t\t\t}\n\t\t);\n\n\t\tconst resultCount = getResultCount( filteredTermsTree );\n\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t_n( '%d result found.', '%d results found.', resultCount, 'connections' ),\n\t\t\tresultCount\n\t\t);\n\n\t\tthis.props.debouncedSpeak( resultsFoundMessage, 'assertive' );\n\t}\n\n\tgetFilterMatcher( filterValue ) {\n\n\t\tconst matchTermsForFilter = ( originalTerm ) => {\n\n\t\t\tif ( '' === filterValue ) {\n\t\t\t\treturn originalTerm;\n\t\t\t}\n\n\t\t\t// Shallow clone, because we'll be filtering the term's children and\n\t\t\t// don't want to modify the original term.\n\t\t\tconst term = { ...originalTerm };\n\n\t\t\t// Map and filter the children, recursive so we deal with grandchildren\n\t\t\t// and any deeper levels.\n\t\t\tif ( term.children.length > 0 ) {\n\t\t\t\tterm.children = term.children.map( matchTermsForFilter ).filter( ( child ) => child );\n\t\t\t}\n\n\t\t\t// If the term's name contains the filterValue, or it has children\n\t\t\t// (i.e. some child matched at some point in the tree) then return it.\n\t\t\tif ( -1 !== term.name.toLowerCase().indexOf( filterValue ) || term.children.length > 0 ) {\n\t\t\t\treturn term;\n\t\t\t}\n\n\t\t\t// Otherwise, return false. After mapping, the list of terms will need\n\t\t\t// to have false values filtered out.\n\t\t\treturn false;\n\t\t};\n\n\t\treturn matchTermsForFilter;\n\t}\n\n\trenderTerms( renderedTerms ) {\n\n\t\tconst { terms = [] } = this.props;\n\n\t\treturn renderedTerms.map( ( term ) => {\n\n\t\t\tconst id = `editor-post-taxonomies-hierarchical-term-${ term.id }`;\n\n\t\t\treturn (\n\t\t\t\t<div key={ term.id } className=\"editor-post-taxonomies__hierarchical-terms-choice cbd__hierarchical-terms-choice\">\n\n\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\tchecked={ terms.indexOf( term.id ) !== -1 }\n\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\tconst termId = parseInt( term.id, 10 );\n\t\t\t\t\t\t\tthis.onChange( termId );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ unescapeString( term.name ) }\n\t\t\t\t\t/>\n\t\t\t\t\t{ !! term.children.length && (\n\t\t\t\t\t\t<div className=\"editor-post-taxonomies__hierarchical-terms-subchoices\">\n\t\t\t\t\t\t\t{ this.renderTerms( term.children ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\n\t\t\t\t</div>\n\t\t\t);\n\t\t} );\n\t}\n\n\trender() {\n\n\t\tconst {\n\t\t\t      taxonomy,\n\t\t\t      instanceId,\n\t\t      } = this.props;\n\t\tconst {\n\t\t\t      availableTermsTree,\n\t\t\t      availableTerms,\n\t\t\t      filteredTermsTree,\n\t\t\t      loading,\n\t\t\t      filterValue\n\t\t      } = this.state;\n\n\t\tif ( loading ) {\n\t\t\treturn (\n\t\t\t\t<p>\n\t\t\t\t\t<Spinner />\n\t\t\t\t\t{ __( 'Loading Data', 'connections' ) }\n\t\t\t\t</p>\n\t\t\t);\n\t\t}\n\n\t\tconst filterInputId = `editor-post-taxonomies__hierarchical-terms-filter-${ instanceId }`;\n\t\tconst filterLabel = sprintf(\n\t\t\t_x( 'Search %s', 'term', 'connections' ),\n\t\t\tstartCase( taxonomy )\n\t\t);\n\t\tconst groupLabel = sprintf(\n\t\t\t_x( 'Available %s', 'term', 'connections' ),\n\t\t\tstartCase( taxonomy )\n\t\t);\n\t\tconst showFilter = availableTerms.length >= MIN_TERMS_COUNT_FOR_FILTER;\n\n\t\treturn [\n\t\t\tshowFilter && <label\n\t\t\t\tkey=\"filter-label\"\n\t\t\t\thtmlFor={ filterInputId }>\n\t\t\t\t{ filterLabel }\n\t\t\t</label>,\n\t\t\tshowFilter && <input\n\t\t\t\ttype=\"search\"\n\t\t\t\tid={ filterInputId }\n\t\t\t\tvalue={ filterValue }\n\t\t\t\tonChange={ this.setFilterValue }\n\t\t\t\tclassName=\"editor-post-taxonomies__hierarchical-terms-filter\"\n\t\t\t\tkey=\"term-filter-input\"\n\t\t\t/>,\n\t\t\t<div\n\t\t\t\tclassName=\"editor-post-taxonomies__hierarchical-terms-list\"\n\t\t\t\tkey=\"term-list\"\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\trole=\"group\"\n\t\t\t\taria-label={ groupLabel }\n\t\t\t>\n\t\t\t\t{ this.renderTerms( '' !== filterValue ? filteredTermsTree : availableTermsTree ) }\n\t\t\t</div>,\n\t\t];\n\n\t}\n}\n\nexport default compose( [\n\t// withSelect( ( select, { slug } ) => {\n\t// \t// const { getCurrentPost } = select( 'core/editor' );\n\t// \t// const { getTaxonomy } = select( 'core' );\n\t// \t// const taxonomy = getTaxonomy( slug );\n\t// \treturn {\n\t// \t\t// hasCreateAction: taxonomy ? get( getCurrentPost(), [ '_links', 'wp:action-create-' + taxonomy.rest_base ], false ) : false,\n\t// \t\t// hasAssignAction: taxonomy ? get( getCurrentPost(), [ '_links', 'wp:action-assign-' + taxonomy.rest_base ], false ) : false,\n\t// \t\t// terms: select( 'connections-directory/categories' ).getCategories( {per_page: -1} ),\n\t// \t\t// terms: [],\n\t// \t\t// taxonomy,\n\t// \t};\n\t// } ),\n\t// withDispatch( ( dispatch ) => ( {\n\t// \tonUpdateTerms( terms, restBase ) {\n\t// \t\tdispatch( 'connections-directory/categories' ).receiveItems( terms );\n\t// \t},\n\t// } ) ),\n\twithSpokenMessages,\n\twithInstanceId,\n\t// withFilters( 'editor.PostTaxonomyType' ),\n] )( HierarchicalTermSelector );\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { withSelect } from '@wordpress/data';\nimport { Spinner, TreeSelect } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\n// import { TreeSelect } from '@wordpress/components';\n\n// Import components\nimport { buildTermsTree } from '../../utils/terms';\n\nfunction PageSelect( {\n\t                     postType,\n\t                     postTypeMeta,\n\t                     label,\n\t                     value,\n\t                     noOptionLabel,\n\t                     options,\n\t                     onChange,\n\t                     ...props\n                     } ) {\n\n\tif ( null === options ) {\n\t\treturn (\n\t\t\t<p>\n\t\t\t\t<Spinner />\n\t\t\t\t{ __( 'Loading Data', 'connections' ) }\n\t\t\t</p>\n\t\t);\n\t}\n\n\t// const { getPostType } = select( 'core' );\n\n\t// const postTypeMeta   = getPostType( postType );\n\tconst isHierarchical = get( postTypeMeta, [ 'hierarchical' ], false );\n\tconst pageItems      = options || [];\n\tlet   pagesTree      = [];\n\n\tif ( ! pageItems.length ) {\n\n\t\treturn null;\n\t}\n\n\tif ( isHierarchical ) {\n\n\t\tpagesTree = buildTermsTree( pageItems.map( ( item ) => ({\n\t\t\tid:     item.id,\n\t\t\tparent: item.parent,\n\t\t\tname:   item.title.raw ? item.title.raw : `#${item.id} (${__( 'no title' )})`,\n\t\t}) ) );\n\n\t} else {\n\n\t\tpagesTree = pageItems.map( ( item ) => ({\n\t\t\tid:     item.id,\n\t\t\tname:   item.title.raw ? item.title.raw : `#${item.id} (${__( 'no title' )})`,\n\t\t}) );\n\t}\n\n\treturn (\n\t\t<TreeSelect\n\t\t\tclassName=\"connections-directory--attributes__home_id\"\n\t\t\tlabel={label}\n\t\t\tnoOptionLabel={noOptionLabel}\n\t\t\ttree={pagesTree}\n\t\t\tselectedId={value}\n\t\t\tonChange={onChange}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nconst applyWithSelect = withSelect( ( select, ownProps ) => {\n\n\tconst { getEntityRecords, getPostType } = select( 'core' );\n\tconst { getCurrentPostId }              = select( 'core/editor' );\n\n\tconst postType     = typeof ownProps.postType === 'undefined' ? 'page' : ownProps.postType;\n\tconst postTypeMeta = getPostType( postType );\n\tconst postId       = getCurrentPostId();\n\n\tconst query = {\n\t\tper_page:       -1,\n\t\texclude:        postId,\n\t\tparent_exclude: postId,\n\t\torderby:        'title',\n\t\torder:          'asc',\n\t\t_fields:        'id,parent,title',\n\t};\n\n\treturn {\n\t\toptions: getEntityRecords( 'postType', postType, query ),\n\t\tpostTypeMeta\n\t};\n} );\n\n// const renderedSelect = applyWithSelect( PageSelect );\n\n// export { renderedSelect as PageSelect };\nexport default applyWithSelect( PageSelect );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { isFinite } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { withInstanceId } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport {\n\tBaseControl,\n\tButton,\n\tDashicon\n} from '@wordpress/components';\n\nfunction RangeControl( {\n\t                       className,\n\t                       label,\n\t                       value,\n\t                       instanceId,\n\t                       onChange,\n\t                       beforeIcon,\n\t                       afterIcon,\n\t                       help,\n\t                       allowReset,\n\t                       initialPosition,\n\t                       ...props\n                       } ) {\n\tconst id = `inspector-range-control-${ instanceId }`;\n\tconst resetValue = () => onChange();\n\tconst onChangeValue = ( event ) => {\n\t\tconst newValue = event.target.value;\n\t\tif ( newValue === '' ) {\n\t\t\tresetValue();\n\t\t\treturn;\n\t\t}\n\t\tonChange( Number( newValue ) );\n\t};\n\tconst initialSliderValue = isFinite( value ) ? value : initialPosition || '';\n\n\treturn (\n\t\t<BaseControl\n\t\t\tlabel={ label }\n\t\t\tid={ id }\n\t\t\thelp={ help }\n\t\t\tclassName={ classnames( 'components-range-control', className ) }\n\t\t>\n\t\t\t{ beforeIcon && <Dashicon icon={ beforeIcon } /> }\n\t\t\t<input\n\t\t\t\tclassName=\"components-range-control__slider\"\n\t\t\t\tid={ id }\n\t\t\t\ttype=\"range\"\n\t\t\t\tvalue={ initialSliderValue }\n\t\t\t\tonChange={ onChangeValue }\n\t\t\t\taria-describedby={ !! help ? id + '__help' : undefined }\n\t\t\t\t{ ...props } />\n\t\t\t{ afterIcon && <Dashicon icon={ afterIcon } /> }\n\t\t\t<input\n\t\t\t\tclassName=\"components-range-control__number\"\n\t\t\t\ttype=\"number\"\n\t\t\t\tonChange={ onChangeValue }\n\t\t\t\taria-label={ label }\n\t\t\t\tvalue={ initialSliderValue }\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t\t{ allowReset &&\n\t\t\t<Button onClick={ resetValue } disabled={ value === undefined }>\n\t\t\t\t{ __( 'Reset' ) }\n\t\t\t</Button>\n\t\t\t}\n\t\t</BaseControl>\n\t);\n}\n\n// const asInstance = withInstanceId( RangeControl );\n\n// export { asInstance as RangeControl };\nexport default withInstanceId( RangeControl );\n","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"htmlEntities\"];","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { decodeEntities } from '@wordpress/html-entities';\n\nclass EntryName extends Component {\n\n\trender() {\n\n\t\tconst { asPermalink = false, attributes, entry, tag } = this.props;\n\t\tconst Tag = tag;\n\n\t\tlet name = decodeEntities( entry.fn.rendered );\n\n\t\tif ( asPermalink ) {\n\n\t\t\tname = <a href={entry.link}>{name}</a>\n\t\t}\n\n\t\treturn (\n\t\t\t<Tag>{name}</Tag>\n\t\t)\n\t}\n}\n\nexport default EntryName;\n","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { decodeEntities } from '@wordpress/html-entities';\n\n/**\n * External dependencies\n */\nimport { isUndefined } from 'lodash';\n\nclass EntryTitle extends Component {\n\n\trender() {\n\n\t\tconst { entry } = this.props;\n\n\t\tif ( isUndefined( entry.job_title ) || 1 > entry.job_title.rendered.length ) return null;\n\n\t\treturn (\n\t\t\t<div className='title'>{ decodeEntities( entry.job_title.rendered ) }</div>\n\t\t)\n\t}\n}\n\nexport default EntryTitle;\n","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * External dependencies\n */\nimport { has } from 'lodash';\n\nclass EntryImage extends Component {\n\n\trender() {\n\n\t\tconst {\n\t\t\t      entry,\n\t\t\t      size,\n\t\t\t      type,\n\t\t\t      usePlaceholder = false,\n\t\t\t      placeholderWidth = 600,  // This should be set the width fetched via the REST API.\n\t\t\t      placeholderHeight = 520, // This should be set the height fetched via the REST API.\n\t\t      } = this.props;\n\n\t\tif ( has( entry.images, [ type, size ] ) ) {\n\n\t\t\tconst {\n\t\t\t\theight,\n\t\t\t\turl,\n\t\t\t\twidth,\n\t\t\t} = entry.images[ type ][ size ];\n\n\t\t\treturn (\n\t\t\t\t<span className=\"cn-image-style\">\n\t\t\t\t\t<span style={ {\n\t\t\t\t\t\tdisplay:  'block',\n\t\t\t\t\t\tmaxWidth: '100%',\n\t\t\t\t\t\twidth:    `${ width }px`\n\t\t\t\t\t} }>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName={ 'cn-image ' + type }\n\t\t\t\t\t\t\twidth={ width }\n\t\t\t\t\t\t\theight={ height }\n\t\t\t\t\t\t\tsrcSet={ url.replace( /^https?:/, '' ) + ' 1x' }\n\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t\t\t__( '%s of %s', 'connections' ),\n\t\t\t\t\t\t\t\t\ttype.charAt(0).toUpperCase() + type.slice(1),\n\t\t\t\t\t\t\t\t\tdecodeEntities( entry.fn.rendered )\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// loading='lazy'\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t)\n\n\t\t} else if ( true === usePlaceholder ) {\n\n\t\t\tlet style = {\n\t\t\t\tdisplay: 'inline-block',\n\t\t\t\tpaddingBottom: `calc(${placeholderHeight} / ${placeholderWidth} * 100%)`,\n\t\t\t\twidth: placeholderWidth + 'px',\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<span className={ 'cn-image-' + type + ' cn-image-none' }\n\t\t\t\t      style={style}>\n\t\t\t\t\t<span>{ __( 'No Image Available', 'connections' ) }</span>\n\t\t\t\t</span>\n\t\t\t)\n\n\t\t} else {\n\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nexport default EntryImage;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Spinner } from '@wordpress/components';\nimport { Component, Fragment, render } from '@wordpress/element';\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport {\n\tEntryImage,\n\tEntryName,\n\tEntryTitle,\n} from \"@Connections-Directory/components\";\n\nconst ENDPOINT = '/cn-api/v1/recently_viewed/';\n\nclass RecentlyViewed extends Component {\n\n\t/**\n\t * Constructor for the Carousel Component.\n\t *\n\t * Sets up state, and creates bindings for functions.\n\t *\n\t * @param {object} props Component properties.\n\t */\n\tconstructor( props ) {\n\n\t\tsuper( props );\n\n\t\tthis.prepareQueryArgs = this.prepareQueryArgs.bind( this );\n\t\tthis.fetchAPI = this.fetchAPI.bind( this );\n\t\tthis.fetchEntries = this.fetchEntries.bind( this );\n\n\t\tthis.state = {\n\t\t\tqueryResults: [],\n\t\t\tisLoading:    true,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\t// console.log( this.props.name, ': componentDidMount()' );\n\t\t// console.log( getRecentlyViewed() );\n\n\t\t// const args = {\n\t\t// \trecent: getRecentlyViewed(),\n\t\t// }\n\n\t\tthis.fetchEntries();\n\t}\n\n\t/**\n\t * @param {object} args\n\t */\n\tprepareQueryArgs( args ) {\n\n\t\tlet query = {};\n\n\t\t// console.log( query );\n\t\t// console.log( this.props );\n\n\t\tquery['exclude'] = this.props.exclude;\n\n\t\tquery['_images'] = [\n\t\t\t{ type: 'logo', size: 'custom', width: 600, height: 520, zc: 2 },\n\t\t\t{ type: 'photo', size: 'custom', width: 600, height: 520, zc: 2 }\n\t\t];\n\n\t\tquery['per_page'] = this.props.limit;\n\n\t\tquery['_fields'] = 'type,fn.rendered,job_title.rendered,phone,email,social,excerpt.rendered,images,link';\n\n\t\tquery = { ...query, ...args };\n\n\t\treturn query;\n\t}\n\n\tfetchAPI( query ) {\n\n\t\tconst path = addQueryArgs(\n\t\t\tENDPOINT,\n\t\t\t{\n\t\t\t\t...query,\n\t\t\t\tcontext: 'view',\n\t\t\t}\n\t\t);\n\n\t\t// console.log( 'Fetching... ', query );\n\n\t\treturn apiFetch( { path: path } );\n\t}\n\n\t/**\n\t * @param {object} args\n\t */\n\tfetchEntries( args = {} ) {\n\n\t\tthis.fetchAPI( this.prepareQueryArgs( args ) ).then( ( results ) => {\n\n\t\t\tthis.setState( { isLoading: false, queryResults: results } );\n\t\t} );\n\t};\n\n\trender() {\n\n\t\tlet entries = this.state.queryResults;\n\n\t\tconst hasEntries = Array.isArray( entries ) && entries.length;\n\n\t\t// console.log( this.props );\n\n\t\tif ( !hasEntries ) {\n\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{ this.state.isLoading ?\n\t\t\t\t\t\t\t<p>{ __( 'Loading...', 'connections' ) } <Spinner /></p> :\n\t\t\t\t\t\t\t<p>{ __( 'No recently viewed directory entries.', 'connections' ) }</p>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</Fragment>\n\t\t\t)\n\n\t\t} else {\n\n\t\t\tconst items = entries\n\t\t\t\t// No need to display the Entry currently being viewed.\n\t\t\t\t.filter( ( entry ) => document.URL !== entry.link )\n\t\t\t\t// Render the Entry name as a permalink within `li` tags.\n\t\t\t\t.map( ( entry, i ) => {\n\t\t\t\t\t// console.log( entry );\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={ i }>\n\t\t\t\t\t\t\t<div className=\"cn-recently-viewed-image\">\n\t\t\t\t\t\t\t\t<EntryImage entry={ entry } type={ 'organization' === entry.type ? 'logo' : 'photo' } size='custom' usePlaceholder={true}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"cn-recently-viewed-details\">\n\t\t\t\t\t\t\t\t<EntryName entry={ entry } tag='span' asPermalink={ true } />\n\t\t\t\t\t\t\t\t<EntryTitle entry={ entry } />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t)\n\t\t\t\t} );\n\n\t\t\treturn ( <ul>{items}</ul> );\n\t\t}\n\n\t};\n}\n\nconst recentlyViewed = document.querySelectorAll( '.cn-recently-viewed' );\n\nrecentlyViewed.forEach( instance => {\n\n\tlet limit = instance.getAttribute( 'data-limit' );\n\tlet exclude = instance.getAttribute( 'data-exclude' );\n\n\trender( <RecentlyViewed limit={limit} exclude={exclude}/>, instance );\n} );\n"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","key","call","join","module","exports","default","factory","OldCookies","window","Cookies","api","noConflict","extend","result","attributes","decode","s","replace","decodeURIComponent","init","converter","set","value","document","path","defaults","expires","Date","toUTCString","JSON","stringify","test","e","write","encodeURIComponent","String","escape","stringifiedAttributes","attributeName","split","cookie","get","json","jar","cookies","parts","slice","charAt","name","read","parse","getJSON","remove","withConverter","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","obj","prop","cnViewing","recentlyViewed","getRecentlyViewed","findIndex","x","entryID","unshift","take","configurable","writable","buildTermsTree","flatTerms","termsByParent","groupBy","fillWithChildren","terms","map","term","children","id","_objectSpread","DEFAULT_QUERY","per_page","orderby","order","_fields","HierarchicalTermSelector","Component","constructor","super","this","findTerm","bind","onChange","setFilterValue","sortBySelected","state","loading","availableTermsTree","availableTerms","filterValue","filteredTermsTree","termId","props","indexOf","without","parent","find","parseInt","toLowerCase","componentDidMount","fetchTerms","componentWillUnmount","invoke","fetchRequest","taxonomy","apiFetch","addQueryArgs","then","setState","xhr","statusText","termsTree","treeHasSelection","termTree","filter","child","sort","termOrChildIsSelected","termA","termB","termASelected","termBSelected","event","target","getFilterMatcher","getResultCount","count","resultCount","resultsFoundMessage","sprintf","_n","debouncedSpeak","matchTermsForFilter","originalTerm","renderTerms","renderedTerms","wp","element","createElement","className","CheckboxControl","checked","label","unescapeString","render","instanceId","Spinner","__","filterInputId","filterLabel","_x","startCase","groupLabel","showFilter","htmlFor","type","tabIndex","role","compose","withSpokenMessages","withInstanceId","_extends","assign","source","_objectWithoutProperties","excluded","sourceKeys","keys","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","withSelect","select","ownProps","getEntityRecords","getPostType","getCurrentPostId","postType","postTypeMeta","postId","options","exclude","parent_exclude","_ref","noOptionLabel","_excluded","isHierarchical","pageItems","pagesTree","item","title","raw","TreeSelect","tree","selectedId","beforeIcon","afterIcon","help","allowReset","initialPosition","resetValue","onChangeValue","newValue","Number","initialSliderValue","isFinite","BaseControl","classnames","Dashicon","icon","Button","onClick","disabled","EntryName","asPermalink","entry","tag","Tag","decodeEntities","fn","rendered","href","link","EntryTitle","isUndefined","job_title","EntryImage","size","usePlaceholder","placeholderWidth","placeholderHeight","has","images","height","url","width","style","display","maxWidth","srcSet","alt","toUpperCase","paddingBottom","RecentlyViewed","prepareQueryArgs","fetchAPI","fetchEntries","queryResults","isLoading","args","query","zc","limit","context","results","entries","items","URL","Fragment","querySelectorAll","forEach","instance","getAttribute"],"sourceRoot":""}