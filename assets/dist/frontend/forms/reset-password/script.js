!function(){"use strict";var e=window.wp.i18n;!function(){const t=new MutationObserver((e=>{e.forEach((e=>{"data-pw"===e.attributeName&&"pass1"===e.target.name&&(e.target.value=e.target.dataset.pw)}))})),s=e=>wp.passwordStrength.meter(e,wp.passwordStrength.userInputDisallowedList(),e),a=(e,t,s)=>{s.forEach((s=>{s.classList.remove("short","bad","good","strong","empty");let a="&nbsp;";if(!t||""===t.trim())return s.classList.add("empty"),void("password-strength-result"===s.dataset.component&&(s.innerHTML=a));switch(e){case-1:s.classList.add("bad"),a=pwsL10n.unknown;break;case 2:s.classList.add("bad"),a=pwsL10n.bad;break;case 3:s.classList.add("good"),a=pwsL10n.good;break;case 4:s.classList.add("strong"),a=pwsL10n.strong;break;default:s.classList.add("short"),a=pwsL10n.short}"password-strength-result"===s.dataset.component&&(s.innerHTML=a)}))},n=e=>!e.trim().length,r=e=>![3,4].includes(e),o=(e,t)=>{e.style.display=t?"block":"none"};document.querySelectorAll('[data-component="form-reset_password"]').forEach((d=>{const i=d.querySelector('input[name="pass1"]'),c=d.querySelector('input[name="pass2"]'),l=[...d.querySelectorAll('input[type="text"], input[type="password"]')],p=d.querySelector('[data-component="password-strength-result"]'),u=d.querySelector('input[name="pw_weak"]'),w=u.closest("div"),b=d.querySelector('button[name="password-toggle"]'),h=d.querySelector('button[name="generate-password"]'),g=d.querySelector('button[name="wp-submit"]'),v=new WeakMap;v.set(d,0);const m=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!n(i.value)&&!n(c.value)&&i.value===c.value&&(!r(v.get(d))||e)};l.forEach((e=>{e.addEventListener("input",(()=>{g.disabled=!l.every((()=>m(u.checked)))})),"pass1"===e.name&&e.addEventListener("input",(t=>{const n=t.target;0===n.value.length?(c.value="",c.disabled=!0,v.set(d,0),o(w,!1)):(v.set(d,s(n.value)),o(w,r(v.get(d))),c.disabled=!1),a(v.get(d),n.value,[e,p])}))})),b.addEventListener("click",(t=>{const s=t.currentTarget;(t=>{const s=t.querySelector("span.dashicons");s.classList.contains("dashicons-hidden")?(s.classList.remove("dashicons-hidden"),s.classList.add("dashicons-visibility"),t.setAttribute("aria-label",(0,e.__)("Show password","connections"))):(s.classList.remove("dashicons-visibility"),s.classList.add("dashicons-hidden"),t.setAttribute("aria-label",(0,e.__)("Hide password","connections")))})(s),(e=>{e.querySelectorAll(".cbd-field--password").forEach((e=>{"password"===e.type?e.setAttribute("type","text"):e.setAttribute("type","password")}))})(s.closest('[data-component="form-reset_password"]'))})),u.addEventListener("change",(e=>{g.disabled=!m(e.target.checked)})),h.addEventListener("click",(()=>{const e=new FormData;e.append("action","generate-password"),fetch(_resetPassword.ajax.root+_resetPassword.ajax.endpoint,{method:"POST",body:e}).then((e=>{e.json().then((e=>{i.setAttribute("data-pw",e.data),c.value=i.dataset.pw,c.disabled=!1,g.disabled=!1,v.set(d,s(e.data)),a(v.get(d),e.data,[i,p]),o(w,r(v.get(d)))}))}))})),d.addEventListener("reset",(()=>{v.set(d,0),a(v.get(d),"",[i,p]),o(w,!1)})),o(w,!1),t.observe(i,{attributes:!0}),((e,t)=>{if("string"==typeof t&&"function"==typeof e[t])e[t]();else{const s="string"==typeof t?new Event(t,{bubbles:!0}):t;e.dispatchEvent(s)}})(h,"click")}))}()}();
//# sourceMappingURL=script.js.map