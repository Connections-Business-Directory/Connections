jQuery(document).ready(function(e){e(".connections").cn_preloader({delay:200,imgSelector:".cn-image img.photo, .cn-image img.logo",beforeShow:function(){e(this).closest(".cn-image img").css("visibility","hidden");
},afterShow:function(){}});var c="Show Details",g="Hide Details",d="Click to show details.",a="Click to hide details.",f=e("a.detailsbutton");f.click(function(){var h=e(this);
h.text(h.text()==c?g:c).attr("title",h.attr("title")==d?a:d);e(".child-"+this.id).each(function(j,k){e(k).toggle();});});e(function(){e("input[name^=entry_type][value=individual]").click(function(){e("#cn-metabox-section-family, #cn-metabox-section-contact").slideUp("fast",function(){e("#cn-metabox-section-name, #cn-metabox-section-title, #cn-metabox-section-organization, #cn-metabox-section-department").slideDown();
});});});e(function(){e("input[name^=entry_type][value=organization]").click(function(){e("#cn-metabox-section-family, #cn-metabox-section-name, #cn-metabox-section-title").slideUp("fast",function(){e("#cn-metabox-section-organization, #cn-metabox-section-department, #cn-metabox-section-contact").slideDown();
});});});e(function(){e("input[name^=entry_type][value=family]").click(function(){e("#cn-metabox-section-name, #cn-metabox-section-title, #cn-metabox-section-organization, #cn-metabox-section-department, #cn-metabox-section-contact").slideUp("fast",function(){e("#cn-metabox-section-family").slideDown();
});});});e(function(){var h=e("input[name^=entry_type]:checked").val();switch(h){case"individual":e("#cn-metabox-section-family, #cn-metabox-section-contact").slideUp();
break;case"organization":e("#cn-metabox-section-family, #cn-metabox-section-name, #cn-metabox-section-title").slideUp();break;case"family":e("#cn-metabox-section-name, #cn-metabox-section-title, #cn-metabox-section-organization, #cn-metabox-section-department, #cn-metabox-section-contact").slideUp();
break;}});e("#add-relation").click(function(){var i=(e("#cn-relation-template").text());var j=new Date();var h=Math.floor(Math.random()*j.getTime());i=i.replace(new RegExp("::FIELD::","gi"),h);
e("#cn-relations").append('<div id="relation-row-'+h+'" class="relation" style="display: none;">'+i+'<a href="#" class="cn-remove cn-button button button-warning" data-type="relation" data-token="'+h+'">Remove</a></div>');
e("#relation-row-"+h).slideDown();e(".cn-enhanced-select").chosen();return false;});if(e.fn.chosen){e(".cn-enhanced-select").chosen();}e("a.cn-add.cn-button").click(function(m){var l=e(this);
var k=l.attr("data-type");var h="#"+l.attr("data-container");var o="#"+k+"-template";var j=e(o).text();var n=new Date();var i=Math.floor(Math.random()*n.getTime());
j=j.replace(new RegExp("::FIELD::","gi"),i);e(h).append('<div class="widget '+k+'" id="'+k+"-row-"+i+'" style="display: none;">'+j+"</div>");e("#"+k+"-row-"+i).slideDown();
m.preventDefault();});e(".postbox").on("click","a.cn-remove.cn-button",function(k){var j=e(this);var h=j.attr("data-token");var i=j.attr("data-type");var l="#"+i+"-row-"+h;
e(l).slideUp("fast",function(){e(this).remove();});k.preventDefault();});if(e.fn.datepicker){e(".cn-datepicker").on("focus",function(){e(this).datepicker({changeMonth:true,changeYear:true,showOtherMonths:true,selectOtherMonths:true,yearRange:"c-100:c+10"});
});}e("#metabox-address").on("click","a.geocode.button",function(m){var h=new Object();var l=e(this);var k;var i;var j=l.attr("data-uid");h.line_1=e("input[name=address\\["+j+"\\]\\[line_1\\]]").val();
h.line_2=e("input[name=address\\["+j+"\\]\\[line_2\\]]").val();h.line_3=e("input[name=address\\["+j+"\\]\\[line_3\\]]").val();h.city=e("input[name=address\\["+j+"\\]\\[city\\]]").val();
h.state=e("input[name=address\\["+j+"\\]\\[state\\]]").val();h.zipcode=e("input[name=address\\["+j+"\\]\\[zipcode\\]]").val();h.country=e("input[name=address\\["+j+"\\]\\[country\\]]").val();
e("#map-"+j).fadeIn("slow",function(){e("#map-"+j).goMap({maptype:"ROADMAP"});e.goMap.clearMarkers();e.goMap.createMarker({address:"'"+h.line_1+", "+h.city+", "+h.state+", "+h.zipcode+", '",id:"baseMarker",draggable:true});
e.goMap.setMap({address:"'"+h.line_1+", "+h.city+", "+h.state+", "+h.zipcode+", '",zoom:18});e.goMap.createListener({type:"marker",marker:"baseMarker"},"idle",function(o){var p=o.latLng.lat();
var n=o.latLng.lng();console.log(p);console.log(n);e("input[name=address\\["+j+"\\]\\[latitude\\]]").val(p);e("input[name=address\\["+j+"\\]\\[longitude\\]]").val(n);
});e.goMap.createListener({type:"marker",marker:"baseMarker"},"dragend",function(o){var p=o.latLng.lat();var n=o.latLng.lng();console.log(p);console.log(n);
e("input[name=address\\["+j+"\\]\\[latitude\\]]").val(p);e("input[name=address\\["+j+"\\]\\[longitude\\]]").val(n);});});setTimeout(function(){b(j);},1500);
m.preventDefault();});function b(i){var h=e("#map-"+i).data("baseMarker").getPosition();e("input[name=address\\["+i+"\\]\\[latitude\\]]").val(h.lat());
e("input[name=address\\["+i+"\\]\\[longitude\\]]").val(h.lng());}e("#metabox-meta").on("click","#newmeta-submit",function(j){var k=e("#list-table").find("tbody tr:last-child");
var l=k.clone();var h=e("#metakeyselect").val()!=="-1"?e("#metakeyselect").val():e("#metakeyinput").val();var i=e("#metavalue").val();e("#metakeyinput, #metavalue").val("");
e("#metakeyselect option").eq(0).prop("selected",true);l.find("input, textarea").attr("id",function(m,n){return n.replace(/(\d+)/,function(o,p){return Number(p)+1;
});});l.find("input, textarea").attr("name",function(n,m){return m.replace(/(\d+)/,function(o,p){return Number(p)+1;});});l.find("label").attr("for",function(n,m){return m.replace(/(\d+)/,function(o,p){return Number(p)+1;
});});l.find('input[name^="newmeta"]').val(h);l.find("textarea").val(i);if(!e("#list-table").is(":visible")){e("#list-table").toggle();}l.toggle();e("#the-list").append(l);
j.preventDefault();});e("#metabox-meta").on("click",'input[name^="deletemeta"]',function(i){var h=e(this).closest("tr").toggle();h.find("textarea").val("::DELETED::");
if(e("#list-table").is(":visible")){if(e("#list-table tbody tr:visible").length==0){e("#list-table").toggle();}}i.preventDefault();});e("#metabox-meta").on("click","#enternew, #cancelnew",function(h){e("#metakeyinput, #metakeyselect, #enternew, #cancelnew").toggle();
e("#metakeyselect option").eq(0).prop("selected",true);e("#metakeyinput").val("");h.preventDefault();});});