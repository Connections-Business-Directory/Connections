jQuery(document).ready(function(c){var b={init:function(){var d;if(c("input[name=entry_type]").length==1){d=(c("input[name=entry_type]").val());}else{if(c("input[name=entry_type]").length>1){d=(c("input[name=entry_type]:checked").val());
}}switch(d){case"individual":this.show(d);break;case"organization":this.show(d);break;case"family":this.show(d);break;}c("#submitdiv").on("click","input[name=entry_type][value=individual]",function(){b.show("individual");
});c("#submitdiv").on("click","input[name=entry_type][value=organization]",function(){b.show("organization");});c("#submitdiv").on("click","input[name=entry_type][value=family]",function(){b.show("family");
});c("#cn-metabox-section-family").on("click","#add-relation",function(){b.relation();});c(".postbox").on("click","a.cn-add.cn-button",function(f){b.add(c(this));
f.preventDefault();});c(".postbox").on("click","a.cn-remove.cn-button",function(f){b.remove(c(this));f.preventDefault();});if(c.fn.chosen){c(".cn-enhanced-select").chosen();
}if(c.fn.datepicker){c("body").on("focus",".cn-datepicker",function(){b.datepicker(c(this));});}c("#metabox-address").on("click","a.geocode.button",function(f){b.geocode(c(this));
f.preventDefault();});if(window.FileReader&&window.File&&window.FileList&&window.Blob){c('input[name="original_image"], input[name="original_logo"]').bind("change",function(){var g=c('input[name="original_image"]');
var f=c('input[name="original_logo"]');if(cn_string.imageMaxFileSize<this.files[0].size){var e=c(this).attr("name");var h=c(this).attr("name")=="original_image"?g.clone(true):f.clone(true);
alert(cn_string.imageMaxFileSizeExceeded);if(e=="original_image"){g.replaceWith(h);}else{f.replaceWith(h);}}});}else{}c("#metabox-meta").on("click","#newmeta-submit",function(f){b.add_meta();
f.preventDefault();});c("#metabox-meta").on("click",'input[name^="deletemeta"]',function(f){b.delete_meta(c(this));f.preventDefault();});c("#metabox-meta").on("click","#enternew, #cancelnew",function(f){b.clear_meta();
f.preventDefault();});b.validate(c("#cn-form"));},show:function(d){switch(d){case"individual":c("input[name=first_name], input[name=last_name]").addClass("required");
c("input[name=organization]").removeClass("required error").addClass("invalid");c("input[name=family_name]").removeClass("required error").addClass("invalid");
c("#cn-metabox-section-name").slideDown();c("#cn-metabox-section-title").slideDown();c("#cn-metabox-section-organization").slideDown();c("#cn-metabox-section-department").slideDown();
c("#cn-metabox-section-contact").slideUp();c("#cn-metabox-section-family").slideUp();break;case"organization":c("input[name=organization]").addClass("required");
c("input[name=first_name], input[name=last_name]").removeClass("required error").addClass("invalid");c("input[name=family_name]").removeClass("required error").addClass("invalid");
c("#cn-metabox-section-name").slideUp();c("#cn-metabox-section-title").slideUp();c("#cn-metabox-section-organization").slideDown();c("#cn-metabox-section-department").slideDown();
c("#cn-metabox-section-contact").slideDown();c("#cn-metabox-section-family").slideUp();break;case"family":c("input[name=family_name]").addClass("required");
c("input[name=first_name], input[name=last_name]").removeClass("required error").addClass("invalid");c("input[name=organization]").removeClass("required error").addClass("invalid");
c("#cn-metabox-section-name").slideUp();c("#cn-metabox-section-title").slideUp();c("#cn-metabox-section-organization").slideUp();c("#cn-metabox-section-department").slideUp();
c("#cn-metabox-section-contact").slideUp();c("#cn-metabox-section-family").slideDown();break;}},add:function(g){var i=g.attr("data-type");var e="#"+g.attr("data-container");
var k="#"+i+"-template";var h=c(k).text();var j=new Date();var f=Math.floor(Math.random()*j.getTime());h=h.replace(new RegExp("::FIELD::","gi"),f);c(e).append('<div class="widget '+i+'" id="'+i+"-row-"+f+'" style="display: none;">'+h+"</div>");
c("#"+i+"-row-"+f).slideDown();},remove:function(e){var d=e.attr("data-token");var f=e.attr("data-type");var g="#"+f+"-row-"+d;c(g).slideUp("fast",function(){c(g).remove();
});},add_meta:function(){var f=c("#list-table").find("tbody tr:last-child");var g=f.clone();var d=c("#metakeyselect").val()!=="-1"?c("#metakeyselect").val():c("#metakeyinput").val();
var e=c("#metavalue").val();c("#metakeyinput, #metavalue").val("");c("#metakeyselect option").eq(0).prop("selected",true);g.find("input, textarea").attr("id",function(h,i){return i.replace(/(\d+)/,function(j,k){return Number(k)+1;
});});g.find("input, textarea").attr("name",function(i,h){return h.replace(/(\d+)/,function(j,k){return Number(k)+1;});});g.find("label").attr("for",function(i,h){return h.replace(/(\d+)/,function(j,k){return Number(k)+1;
});});g.find('input[name^="newmeta"]').val(d);g.find("textarea").val(e);if(!c("#list-table").is(":visible")){c("#list-table").toggle();}g.toggle();c("#the-list").append(g);
},delete_meta:function(e){var d=e.closest("tr").toggle();d.find("textarea").val("::DELETED::");if(c("#list-table").is(":visible")){if(c("#list-table tbody tr:visible").length==0){c("#list-table").toggle();
}}},clear_meta:function(){c("#metakeyinput, #metakeyselect, #enternew, #cancelnew").toggle();c("#metakeyselect option").eq(0).prop("selected",true);c("#metakeyinput").val("");
},chosen:function(d){d.chosen();},datepicker:function(d){d.datepicker({changeMonth:true,changeYear:true,showOtherMonths:true,selectOtherMonths:true,yearRange:"c-100:c+10"});
},geocode:function(h){var d=new Object();var g;var e;var f=h.attr("data-uid");d.line_1=c("input[name=address\\["+f+"\\]\\[line_1\\]]").val();d.line_2=c("input[name=address\\["+f+"\\]\\[line_2\\]]").val();
d.line_3=c("input[name=address\\["+f+"\\]\\[line_3\\]]").val();d.city=c("input[name=address\\["+f+"\\]\\[city\\]]").val();d.state=c("input[name=address\\["+f+"\\]\\[state\\]]").val();
d.zipcode=c("input[name=address\\["+f+"\\]\\[zipcode\\]]").val();d.country=c("input[name=address\\["+f+"\\]\\[country\\]]").val();c("#map-"+f).fadeIn("slow",function(){c("#map-"+f).goMap({maptype:"ROADMAP"});
c.goMap.clearMarkers();c.goMap.createMarker({address:"'"+d.line_1+", "+d.city+", "+d.state+", "+d.zipcode+", '",id:"baseMarker",draggable:true});c.goMap.setMap({address:"'"+d.line_1+", "+d.city+", "+d.state+", "+d.zipcode+", '",zoom:18});
c.goMap.createListener({type:"marker",marker:"baseMarker"},"idle",function(j){var k=j.latLng.lat();var i=j.latLng.lng();c("input[name=address\\["+f+"\\]\\[latitude\\]]").val(k);
c("input[name=address\\["+f+"\\]\\[longitude\\]]").val(i);});c.goMap.createListener({type:"marker",marker:"baseMarker"},"dragend",function(j){var k=j.latLng.lat();
var i=j.latLng.lng();c("input[name=address\\["+f+"\\]\\[latitude\\]]").val(k);c("input[name=address\\["+f+"\\]\\[longitude\\]]").val(i);});});setTimeout(function(){b.setGEO(f);
},1500);},setGEO:function(e){var d=c("#map-"+e).data("baseMarker").getPosition();c("input[name=address\\["+e+"\\]\\[latitude\\]]").val(d.lat());c("input[name=address\\["+e+"\\]\\[longitude\\]]").val(d.lng());
},relation:function(){var f=(c("#cn-relation-template").text());var g=new Date();var e=Math.floor(Math.random()*g.getTime());f=f.replace(new RegExp("::FIELD::","gi"),e);
c("#cn-relations").append('<div id="relation-row-'+e+'" class="relation" style="display: none;">'+f+'<a href="#" class="cn-remove cn-button button button-warning" data-type="relation" data-token="'+e+'">Remove</a></div>');
c("#relation-row-"+e).slideDown();c(".cn-enhanced-select").chosen();},validate:function(d){d.validate({errorPlacement:function(e,f){},ignore:'ul.chosen-choices li.search-field input, textarea[id$="template"]'});
}};b.init();c("a.detailsbutton").click(function(){var d=c(this);d.text(d.text()==cn_string.showDetails?cn_string.hideDetails:cn_string.showDetails).attr("title",d.attr("title")==cn_string.showDetailsTitle?cn_string.hideDetailsTitle:cn_string.showDetailsTitle);
c(".child-"+this.id).each(function(e,f){c(f).toggle();});});function a(h,j){if(h==0){return"0 Bytes";}if(h==1){return"1 Byte";}if(h==-1){return"-1 Byte";
}var f=Math.abs(h);if(j&&j.toLowerCase()&&j.toLowerCase()=="si"){var e=Math.pow(10,3);var k=["Bytes","kB","MB","GB","TB","PB","EB","ZB","YB"];}else{var e=Math.pow(2,10);
var k=["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];}var g=Math.floor(Math.log(f)/Math.log(e));var d=(f/Math.pow(e,g));if(h<0){d*=-1;}if(d>=99.995||g==0){return d.toFixed(0)+" "+k[g];
}else{return d.toFixed(2)+" "+k[g];}}});