jQuery(document).ready(function(a){var b={init:function(){var b=this;a(document.body).on("submit",".cn-export-form",function(c){c.preventDefault();var d=a(this),e=d.find('input[type="submit"]');if(!e.hasClass("button-disabled")){e.addClass("button-disabled").prop("disabled",!0);var f=e.data("action"),g=e.data("nonce");d.find(".status").remove(),d.append('<div class="status"><span class="spinner is-active"></span><div class="export-progress"><div></div></div></div>'),b.submit(f,1,g,d,b)}})},submit:function(a,b,c,d,e){var f=window.wp;f.ajax.send(a,{success:function(b){if(console.log(b),"completed"==b.step){var c=d.find(".status"),f=d.find('input[type="submit"]');f.removeClass("button-disabled").prop("disabled",!1),c.remove(),window.location=b.url}else{var g=d.find(".export-progress div");g.animate({width:b.percentage+"%"},50,function(){}),e.step(a,b.step,b.nonce,d,e)}},error:function(a){console.log(a);var b=d.find(".status"),c=d.find('input[type="submit"]');c.removeClass("button-disabled").prop("disabled",!1),b.html('<div class="update error"><p>'+a.message+"</p></div>")},data:{_ajax_nonce:c,step:b}})},step:function(a,b,c,d,e){e.submit(a,b,c,d,e)}};b.init()});