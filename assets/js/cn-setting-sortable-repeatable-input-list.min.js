jQuery(document).ready((function($){var cnSortableRepeatableInputList={init:function(){this.add(),this.setValue(),this.remove()},clone:function(row,template=!0){var source,clone=$(row).clone(!0);return clone.find("input").each((function(){if(!template){var name=$(this).attr("name");name=name.replace(/\[([^\]]*)\][^\[]*$/,"[%token%]"),$(this).attr("id",name)}$(this).val("").attr("value","").prop("checked",!1).removeAttr("checked")})),clone.find("input[type=text]").attr("data-registered",0).attr("data-custom",0).data("registered",0).data("custom",0).prop("disabled",!1),clone.find("input[type=checkbox]").prop("disabled",!1),0===clone.find("a.cn-remove").length&&clone.append('<a href="#" class="cn-remove cn-button button">Remove</a>'),clone.show(),clone},add:function(){$(".cn-sortable-input-repeatable .cn-add").on("click",(function(e){e.preventDefault();var asTemplate=!0,li=$(this).parent().prev("li"),template,node=$(this).closest("ul").find("template").prop("content"),row=$(node).find("li");0===row.length&&(console.log("no template found, cloning previous row instead"),asTemplate=!1,row=li),li.after(cnSortableRepeatableInputList.clone(row,asTemplate))}))},setValue:function(){$(".cn-sortable-input-repeatable").on("keydown","li input[type=text]",(function(e){var text=$(this),siblings=text.siblings("input");1!==text.data("registered")&&1!==text.data("custom")&&setTimeout((function(){var value=text.val(),slug=value.trim().replace(/\W+/g,"-").replace(/^-+|-+$/g,"").toLowerCase(),dataID=void 0!==text.data("id")?text.data("id"):text.attr("id").replace(/\[([^\]]*)\][^\[]*$/,"["+slug+"]"),dataName=void 0!==text.data("name")?text.data("name"):text.attr("name").replace(/\[([^\]]*)\][^\[]*$/,"["+slug+"]");text.attr("id",dataID.replace(/%token%/,slug)).attr("name",dataName.replace(/%token%/,slug)).attr("value",value),siblings.each((function(){var sibling=$(this),dataID=void 0!==sibling.data("id")?sibling.data("id"):sibling.attr("id"),dataName=void 0!==sibling.data("name")?sibling.data("name"):sibling.attr("name");sibling.attr("id",dataID.replace(/%token%/,slug)).attr("name",dataName.replace(/%token%/,slug))})),siblings.filter('[name$="[slug]"]').each((function(){$(this).attr("value",slug)})),siblings.filter('[name$="[]"]').each((function(){$(this).attr("value",slug)}))}),0)}))},remove:function(){$(".cn-sortable-input-repeatable").on("click",".cn-remove",(function(e){e.preventDefault(),$(this).parent().remove()}))}};cnSortableRepeatableInputList.init()}));