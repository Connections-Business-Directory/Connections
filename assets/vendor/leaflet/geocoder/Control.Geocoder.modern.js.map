{"version":3,"file":"Control.Geocoder.modern.js","sources":["../src/geocoders/api.ts","../src/util.ts","../src/geocoders/arcgis.ts","../src/geocoders/bing.ts","../src/geocoders/google.ts","../src/geocoders/here.ts","../src/geocoders/latlng.ts","../src/geocoders/mapbox.ts","../src/geocoders/mapquest.ts","../src/geocoders/neutrino.ts","../src/geocoders/nominatim.ts","../src/geocoders/open-location-code.ts","../src/geocoders/opencage.ts","../src/geocoders/pelias.ts","../src/geocoders/photon.ts","../src/geocoders/what3words.ts","../src/control.ts","../src/index.ts"],"sourcesContent":["import * as L from 'leaflet';\n\n/**\n * An object that represents a result from a geocoding query\n */\nexport interface GeocodingResult {\n  /**\n   * Name of found location\n   */\n  name: string;\n  /**\n   * The bounds of the location\n   */\n  bbox: L.LatLngBounds;\n  /**\n   * The center coordinate of the location\n   */\n  center: L.LatLng;\n  /**\n   * URL for icon representing result; optional\n   */\n  icon?: string;\n  /**\n   * HTML formatted representation of the name\n   */\n  html?: string;\n  /**\n   * Additional properties returned by the geocoder\n   */\n  properties?: any;\n}\n\n/**\n * A callback function used in {@link IGeocoder.geocode} and {@link IGeocoder.suggest} and {@link IGeocoder.reverse}\n */\nexport type GeocodingCallback = (result: GeocodingResult[]) => void;\n\n/**\n * An interface implemented to respond to geocoding queries\n */\nexport interface IGeocoder {\n  /**\n   * Performs a geocoding query and returns the results to the callback in the provided context\n   * @param query the query\n   * @param cb the callback function\n   * @param context the `this` context in the callback\n   */\n  geocode(query: string, cb: GeocodingCallback, context?: any): void;\n  /**\n   * Performs a geocoding query suggestion (this happens while typing) and returns the results to the callback in the provided context\n   * @param query the query\n   * @param cb the callback function\n   * @param context the `this` context in the callback\n   */\n  suggest?(query: string, cb: GeocodingCallback, context?: any): void;\n  /**\n   * Performs a reverse geocoding query and returns the results to the callback in the provided context\n   * @param location the coordinate to reverse geocode\n   * @param scale the map scale possibly used for reverse geocoding\n   * @param cb the callback function\n   * @param context the `this` context in the callback\n   */\n  reverse?(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void;\n}\n\nexport interface GeocoderOptions {\n  /**\n   * URL of the service\n   */\n  serviceUrl: string;\n  /**\n   * Additional URL parameters (strings) that will be added to geocoding requests\n   */\n  geocodingQueryParams?: Record<string, unknown>;\n  /**\n   * Additional URL parameters (strings) that will be added to reverse geocoding requests\n   */\n  reverseQueryParams?: Record<string, unknown>;\n  /**\n   * API key to use this service\n   */\n  apiKey?: string;\n}\n\n/**\n * @internal\n */\nexport function geocodingParams(\n  options: GeocoderOptions,\n  params: Record<string, unknown>\n): Record<string, unknown> {\n  return L.Util.extend(params, options.geocodingQueryParams);\n}\n\n/**\n * @internal\n */\nexport function reverseParams(\n  options: GeocoderOptions,\n  params: Record<string, unknown>\n): Record<string, unknown> {\n  return L.Util.extend(params, options.reverseQueryParams);\n}\n","import * as L from 'leaflet';\n/**\n * @internal\n */\nlet lastCallbackId = 0;\n\n// Adapted from handlebars.js\n// https://github.com/wycats/handlebars.js/\n/**\n * @internal\n */\nconst badChars = /[&<>\"'`]/g;\n/**\n * @internal\n */\nconst possible = /[&<>\"'`]/;\n/**\n * @internal\n */\nconst escape: Record<string, string> = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n\n/**\n * @internal\n */\nfunction escapeChar(chr: string) {\n  return escape[chr];\n}\n\n/**\n * @internal\n */\nexport function htmlEscape(string?: string): string {\n  if (string == null) {\n    return '';\n  } else if (!string) {\n    return string + '';\n  }\n\n  // Force a string conversion as this will be done by the append regardless and\n  // the regex test will do this transparently behind the scenes, causing issues if\n  // an object's to string has escaped characters in it.\n  string = '' + string;\n\n  if (!possible.test(string)) {\n    return string;\n  }\n  return string.replace(badChars, escapeChar);\n}\n\n/**\n * @internal\n */\nexport function jsonp(\n  url: string,\n  params: Record<string, any>,\n  callback: (message: any) => void,\n  context: any,\n  jsonpParam?: string\n) {\n  const callbackId = '_l_geocoder_' + lastCallbackId++;\n  params[jsonpParam || 'callback'] = callbackId;\n  (window as any)[callbackId] = L.Util.bind(callback, context);\n  const script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.src = url + getParamString(params);\n  script.id = callbackId;\n  document.getElementsByTagName('head')[0].appendChild(script);\n}\n\n/**\n * @internal\n */\nexport function getJSON(\n  url: string,\n  params: Record<string, unknown>,\n  callback: (message: any) => void\n): void {\n  const xmlHttp = new XMLHttpRequest();\n  xmlHttp.onreadystatechange = function() {\n    if (xmlHttp.readyState !== 4) {\n      return;\n    }\n    let message;\n    if (xmlHttp.status !== 200 && xmlHttp.status !== 304) {\n      message = '';\n    } else if (typeof xmlHttp.response === 'string') {\n      // IE doesn't parse JSON responses even with responseType: 'json'.\n      try {\n        message = JSON.parse(xmlHttp.response);\n      } catch (e) {\n        // Not a JSON response\n        message = xmlHttp.response;\n      }\n    } else {\n      message = xmlHttp.response;\n    }\n    callback(message);\n  };\n  xmlHttp.open('GET', url + getParamString(params), true);\n  xmlHttp.responseType = 'json';\n  xmlHttp.setRequestHeader('Accept', 'application/json');\n  xmlHttp.send(null);\n}\n\n/**\n * @internal\n */\nexport function template(str: string, data: Record<string, any>): string {\n  return str.replace(/\\{ *([\\w_]+) *\\}/g, (str, key) => {\n    let value = data[key];\n    if (value === undefined) {\n      value = '';\n    } else if (typeof value === 'function') {\n      value = value(data);\n    }\n    return htmlEscape(value);\n  });\n}\n\n/**\n * @internal\n */\nexport function getParamString(\n  obj: Record<string, unknown | unknown[]>,\n  existingUrl?: string,\n  uppercase?: boolean\n): string {\n  const params = [];\n  for (const i in obj) {\n    const key = encodeURIComponent(uppercase ? i.toUpperCase() : i);\n    const value = obj[i];\n    if (!Array.isArray(value)) {\n      params.push(key + '=' + encodeURIComponent(String(value)));\n    } else {\n      for (let j = 0; j < value.length; j++) {\n        params.push(key + '=' + encodeURIComponent(value[j]));\n      }\n    }\n  }\n  return (!existingUrl || existingUrl.indexOf('?') === -1 ? '?' : '&') + params.join('&');\n}\n","import * as L from 'leaflet';\nimport { getJSON } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\nexport interface ArcGisOptions extends GeocoderOptions {}\n\n/**\n * Implementation of the [ArcGIS geocoder](https://developers.arcgis.com/features/geocoding/)\n */\nexport class ArcGis implements IGeocoder {\n  options: ArcGisOptions = {\n    serviceUrl: 'https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer',\n    apiKey: ''\n  };\n\n  constructor(options?: Partial<ArcGisOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    const params = geocodingParams(this.options, {\n      token: this.options.apiKey,\n      SingleLine: query,\n      outFields: 'Addr_Type',\n      forStorage: false,\n      maxLocations: 10,\n      f: 'json'\n    });\n\n    getJSON(this.options.serviceUrl + '/findAddressCandidates', params, data => {\n      const results: GeocodingResult[] = [];\n      if (data.candidates && data.candidates.length) {\n        for (let i = 0; i <= data.candidates.length - 1; i++) {\n          const loc = data.candidates[i];\n          const latLng = L.latLng(loc.location.y, loc.location.x);\n          const latLngBounds = L.latLngBounds(\n            L.latLng(loc.extent.ymax, loc.extent.xmax),\n            L.latLng(loc.extent.ymin, loc.extent.xmin)\n          );\n          results[i] = {\n            name: loc.address,\n            bbox: latLngBounds,\n            center: latLng\n          };\n        }\n      }\n\n      cb.call(context, results);\n    });\n  }\n\n  suggest(query: string, cb: GeocodingCallback, context?: any): void {\n    return this.geocode(query, cb, context);\n  }\n\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    const params = reverseParams(this.options, {\n      location: location.lng + ',' + location.lat,\n      distance: 100,\n      f: 'json'\n    });\n    getJSON(this.options.serviceUrl + '/reverseGeocode', params, data => {\n      const result: GeocodingResult[] = [];\n      if (data && !data.error) {\n        const center = L.latLng(data.location.y, data.location.x);\n        const bbox = L.latLngBounds(center, center);\n        result.push({\n          name: data.address.Match_addr,\n          center: center,\n          bbox: bbox\n        });\n      }\n\n      cb.call(context, result);\n    });\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link ArcGis}\n * @param options the options\n */\nexport function arcgis(options?: Partial<ArcGisOptions>) {\n  return new ArcGis(options);\n}\n","import * as L from 'leaflet';\nimport { jsonp } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\nexport interface BingOptions extends GeocoderOptions {}\n\n/**\n * Implementation of the [Bing Locations API](https://docs.microsoft.com/en-us/bingmaps/rest-services/locations/)\n */\nexport class Bing implements IGeocoder {\n  options: BingOptions = {\n    serviceUrl: 'https://dev.virtualearth.net/REST/v1/Locations'\n  };\n\n  constructor(options?: Partial<BingOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    const params = geocodingParams(this.options, {\n      query: query,\n      key: this.options.apiKey\n    });\n    jsonp(\n      this.options.apiKey,\n      params,\n      data => {\n        const results: GeocodingResult[] = [];\n        if (data.resourceSets.length > 0) {\n          for (let i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n            const resource = data.resourceSets[0].resources[i],\n              bbox = resource.bbox;\n            results[i] = {\n              name: resource.name,\n              bbox: L.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n              center: L.latLng(resource.point.coordinates)\n            };\n          }\n        }\n        cb.call(context, results);\n      },\n      this,\n      'jsonp'\n    );\n  }\n\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    const params = reverseParams(this.options, {\n      key: this.options.apiKey\n    });\n    jsonp(\n      this.options.serviceUrl + location.lat + ',' + location.lng,\n      params,\n      data => {\n        const results: GeocodingResult[] = [];\n        for (let i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n          const resource = data.resourceSets[0].resources[i],\n            bbox = resource.bbox;\n          results[i] = {\n            name: resource.name,\n            bbox: L.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n            center: L.latLng(resource.point.coordinates)\n          };\n        }\n        cb.call(context, results);\n      },\n      this,\n      'jsonp'\n    );\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Bing}\n * @param options the options\n */\nexport function bing(options?: Partial<BingOptions>) {\n  return new Bing(options);\n}\n","import * as L from 'leaflet';\nimport { getJSON } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\n/**\n * Implementation of the [Google Geocoding API](https://developers.google.com/maps/documentation/geocoding/)\n */\nexport interface GoogleOptions extends GeocoderOptions {}\n\nexport class Google implements IGeocoder {\n  options: GoogleOptions = {\n    serviceUrl: 'https://maps.googleapis.com/maps/api/geocode/json'\n  };\n\n  constructor(options?: Partial<GoogleOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    const params = geocodingParams(this.options, {\n      key: this.options.apiKey,\n      address: query\n    });\n    getJSON(this.options.serviceUrl, params, data => {\n      const results: GeocodingResult[] = [];\n      if (data.results && data.results.length) {\n        for (let i = 0; i <= data.results.length - 1; i++) {\n          const loc = data.results[i];\n          const latLng = L.latLng(loc.geometry.location);\n          const latLngBounds = L.latLngBounds(\n            L.latLng(loc.geometry.viewport.northeast),\n            L.latLng(loc.geometry.viewport.southwest)\n          );\n          results[i] = {\n            name: loc.formatted_address,\n            bbox: latLngBounds,\n            center: latLng,\n            properties: loc.address_components\n          };\n        }\n      }\n\n      cb.call(context, results);\n    });\n  }\n\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    const params = reverseParams(this.options, {\n      key: this.options.apiKey,\n      latlng: location.lat + ',' + location.lng\n    });\n    getJSON(this.options.serviceUrl, params, data => {\n      const results: GeocodingResult[] = [];\n      if (data.results && data.results.length) {\n        for (let i = 0; i <= data.results.length - 1; i++) {\n          const loc = data.results[i];\n          const center = L.latLng(loc.geometry.location);\n          const bbox = L.latLngBounds(\n            L.latLng(loc.geometry.viewport.northeast),\n            L.latLng(loc.geometry.viewport.southwest)\n          );\n          results[i] = {\n            name: loc.formatted_address,\n            bbox: bbox,\n            center: center,\n            properties: loc.address_components\n          };\n        }\n      }\n\n      cb.call(context, results);\n    });\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Google}\n * @param options the options\n */\nexport function google(options?: Partial<GoogleOptions>) {\n  return new Google(options);\n}\n","import * as L from 'leaflet';\nimport { getJSON } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\nexport interface HereOptions extends GeocoderOptions {\n  /**\n   * Use `apiKey` and the new `HEREv2` geocoder\n   * @deprecated\n   */\n  app_id: string;\n  /**\n   * Use `apiKey` and the new `HEREv2` geocoder\n   * @deprecated\n   */\n  app_code: string;\n  reverseGeocodeProxRadius?: any;\n  apiKey: string;\n  maxResults: number;\n}\n\n/**\n * Implementation of the [HERE Geocoder API](https://developer.here.com/documentation/geocoder/topics/introduction.html)\n */\nexport class HERE implements IGeocoder {\n  options: HereOptions = {\n    serviceUrl: 'https://geocoder.api.here.com/6.2/',\n    app_id: '',\n    app_code: '',\n    apiKey: '',\n    maxResults: 5\n  };\n\n  constructor(options?: Partial<HereOptions>) {\n    L.Util.setOptions(this, options);\n    if (options.apiKey) throw Error('apiKey is not supported, use app_id/app_code instead!');\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    const params = geocodingParams(this.options, {\n      searchtext: query,\n      gen: 9,\n      app_id: this.options.app_id,\n      app_code: this.options.app_code,\n      jsonattributes: 1,\n      maxresults: this.options.maxResults\n    });\n    this.getJSON(this.options.serviceUrl + 'geocode.json', params, cb, context);\n  }\n\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    let prox = location.lat + ',' + location.lng;\n    if (this.options.reverseGeocodeProxRadius) {\n      prox += ',' + this.options.reverseGeocodeProxRadius;\n    }\n    const params = reverseParams(this.options, {\n      prox,\n      mode: 'retrieveAddresses',\n      app_id: this.options.app_id,\n      app_code: this.options.app_code,\n      gen: 9,\n      jsonattributes: 1,\n      maxresults: this.options.maxResults\n    });\n    this.getJSON(this.options.serviceUrl + 'reversegeocode.json', params, cb, context);\n  }\n\n  getJSON(url: string, params: any, cb: GeocodingCallback, context?: any) {\n    getJSON(url, params, data => {\n      const results: GeocodingResult[] = [];\n\n      if (data.response.view && data.response.view.length) {\n        for (let i = 0; i <= data.response.view[0].result.length - 1; i++) {\n          const loc = data.response.view[0].result[i].location;\n          const center = L.latLng(loc.displayPosition.latitude, loc.displayPosition.longitude);\n          const bbox = L.latLngBounds(\n            L.latLng(loc.mapView.topLeft.latitude, loc.mapView.topLeft.longitude),\n            L.latLng(loc.mapView.bottomRight.latitude, loc.mapView.bottomRight.longitude)\n          );\n          results[i] = {\n            name: loc.address.label,\n            properties: loc.address,\n            bbox: bbox,\n            center: center\n          };\n        }\n      }\n      cb.call(context, results);\n    });\n  }\n}\n\n/**\n * Implementation of the new [HERE Geocoder API](https://developer.here.com/documentation/geocoding-search-api/api-reference-swagger.html)\n */\nexport class HEREv2 implements IGeocoder {\n  options: HereOptions = {\n    serviceUrl: 'https://geocode.search.hereapi.com/v1',\n    apiKey: '',\n    app_id: '',\n    app_code: '',\n    maxResults: 10\n  };\n\n  constructor(options?: Partial<HereOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    const params = geocodingParams(this.options, {\n      q: query,\n      apiKey: this.options.apiKey,\n      limit: this.options.maxResults\n    });\n\n    if (!params.at && !params.in) {\n      throw Error(\n        'at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.'\n      );\n    }\n\n    this.getJSON(this.options.serviceUrl + '/discover', params, cb, context);\n  }\n\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    const params = reverseParams(this.options, {\n      at: location.lat + ',' + location.lng,\n      limit: this.options.reverseGeocodeProxRadius,\n      apiKey: this.options.apiKey\n    });\n    this.getJSON(this.options.serviceUrl + '/revgeocode', params, cb, context);\n  }\n\n  getJSON(url: string, params: any, cb: GeocodingCallback, context?: any) {\n    getJSON(url, params, data => {\n      const results: GeocodingResult[] = [];\n\n      if (data.items && data.items.length) {\n        for (let i = 0; i <= data.items.length - 1; i++) {\n          const item = data.items[i];\n          const latLng = L.latLng(item.position.lat, item.position.lng);\n          let bbox: L.LatLngBounds;\n          if (item.mapView) {\n            bbox = L.latLngBounds(\n              L.latLng(item.mapView.south, item.mapView.west),\n              L.latLng(item.mapView.north, item.mapView.east)\n            );\n          } else {\n            // Using only position when not provided\n            bbox = L.latLngBounds(\n              L.latLng(item.position.lat, item.position.lng),\n              L.latLng(item.position.lat, item.position.lng)\n            );\n          }\n          results[i] = {\n            name: item.address.label,\n            properties: item.address,\n            bbox: bbox,\n            center: latLng\n          };\n        }\n      }\n      cb.call(context, results);\n    });\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link HERE}\n * @param options the options\n */\nexport function here(options?: Partial<HereOptions>) {\n  if (options.apiKey) {\n    return new HEREv2(options);\n  } else {\n    return new HERE(options);\n  }\n}\n","import * as L from 'leaflet';\nimport { IGeocoder, GeocodingCallback, GeocodingResult } from './api';\n\nexport interface LatLngOptions {\n  /**\n   * The next geocoder to use for non-supported queries\n   */\n  next?: IGeocoder;\n  /**\n   * The size in meters used for passing to `LatLng.toBounds`\n   */\n  sizeInMeters: number;\n}\n\n/**\n * Parses basic latitude/longitude strings such as `'50.06773 14.37742'`, `'N50.06773 W14.37742'`, `'S 50° 04.064 E 014° 22.645'`, or `'S 50° 4′ 03.828″, W 14° 22′ 38.712″'`\n * @param query the latitude/longitude string to parse\n * @returns the parsed latitude/longitude\n */\nexport function parseLatLng(query: string): L.LatLng | undefined {\n  let match;\n  // regex from https://github.com/openstreetmap/openstreetmap-website/blob/master/app/controllers/geocoder_controller.rb\n  if ((match = query.match(/^([NS])\\s*(\\d{1,3}(?:\\.\\d*)?)\\W*([EW])\\s*(\\d{1,3}(?:\\.\\d*)?)$/))) {\n    // [NSEW] decimal degrees\n    return L.latLng(\n      (/N/i.test(match[1]) ? 1 : -1) * +match[2],\n      (/E/i.test(match[3]) ? 1 : -1) * +match[4]\n    );\n  } else if (\n    (match = query.match(/^(\\d{1,3}(?:\\.\\d*)?)\\s*([NS])\\W*(\\d{1,3}(?:\\.\\d*)?)\\s*([EW])$/))\n  ) {\n    // decimal degrees [NSEW]\n    return L.latLng(\n      (/N/i.test(match[2]) ? 1 : -1) * +match[1],\n      (/E/i.test(match[4]) ? 1 : -1) * +match[3]\n    );\n  } else if (\n    (match = query.match(\n      /^([NS])\\s*(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?\\W*([EW])\\s*(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?$/\n    ))\n  ) {\n    // [NSEW] degrees, decimal minutes\n    return L.latLng(\n      (/N/i.test(match[1]) ? 1 : -1) * (+match[2] + +match[3] / 60),\n      (/E/i.test(match[4]) ? 1 : -1) * (+match[5] + +match[6] / 60)\n    );\n  } else if (\n    (match = query.match(\n      /^(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?\\s*([NS])\\W*(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?\\s*([EW])$/\n    ))\n  ) {\n    // degrees, decimal minutes [NSEW]\n    return L.latLng(\n      (/N/i.test(match[3]) ? 1 : -1) * (+match[1] + +match[2] / 60),\n      (/E/i.test(match[6]) ? 1 : -1) * (+match[4] + +match[5] / 60)\n    );\n  } else if (\n    (match = query.match(\n      /^([NS])\\s*(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]?\\W*([EW])\\s*(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]?$/\n    ))\n  ) {\n    // [NSEW] degrees, minutes, decimal seconds\n    return L.latLng(\n      (/N/i.test(match[1]) ? 1 : -1) * (+match[2] + +match[3] / 60 + +match[4] / 3600),\n      (/E/i.test(match[5]) ? 1 : -1) * (+match[6] + +match[7] / 60 + +match[8] / 3600)\n    );\n  } else if (\n    (match = query.match(\n      /^(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]\\s*([NS])\\W*(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]?\\s*([EW])$/\n    ))\n  ) {\n    // degrees, minutes, decimal seconds [NSEW]\n    return L.latLng(\n      (/N/i.test(match[4]) ? 1 : -1) * (+match[1] + +match[2] / 60 + +match[3] / 3600),\n      (/E/i.test(match[8]) ? 1 : -1) * (+match[5] + +match[6] / 60 + +match[7] / 3600)\n    );\n  } else if ((match = query.match(/^\\s*([+-]?\\d+(?:\\.\\d*)?)\\s*[\\s,]\\s*([+-]?\\d+(?:\\.\\d*)?)\\s*$/))) {\n    return L.latLng(+match[1], +match[2]);\n  }\n}\n\n/**\n * Parses basic latitude/longitude strings such as `'50.06773 14.37742'`, `'N50.06773 W14.37742'`, `'S 50° 04.064 E 014° 22.645'`, or `'S 50° 4′ 03.828″, W 14° 22′ 38.712″'`\n */\nexport class LatLng implements IGeocoder {\n  options: LatLngOptions = {\n    next: undefined,\n    sizeInMeters: 10000\n  };\n\n  constructor(options?: Partial<LatLngOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any) {\n    const center = parseLatLng(query);\n    if (center) {\n      const results: GeocodingResult[] = [\n        {\n          name: query,\n          center: center,\n          bbox: center.toBounds(this.options.sizeInMeters)\n        }\n      ];\n      cb.call(context, results);\n    } else if (this.options.next) {\n      this.options.next.geocode(query, cb, context);\n    }\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link LatLng}\n * @param options the options\n */\nexport function latLng(options?: Partial<LatLngOptions>) {\n  return new LatLng(options);\n}\n","import * as L from 'leaflet';\nimport { getJSON } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\nexport interface MapboxOptions extends GeocoderOptions {}\n\n/**\n * Implementation of the [Mapbox Geocoding](https://www.mapbox.com/api-documentation/#geocoding)\n */\nexport class Mapbox implements IGeocoder {\n  options: MapboxOptions = {\n    serviceUrl: 'https://api.mapbox.com/geocoding/v5/mapbox.places/'\n  };\n\n  constructor(options?: Partial<MapboxOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  _getProperties(loc) {\n    const properties = {\n      text: loc.text,\n      address: loc.address\n    };\n\n    for (let j = 0; j < (loc.context || []).length; j++) {\n      const id = loc.context[j].id.split('.')[0];\n      properties[id] = loc.context[j].text;\n\n      // Get country code when available\n      if (loc.context[j].short_code) {\n        properties['countryShortCode'] = loc.context[j].short_code;\n      }\n    }\n    return properties;\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    const params: any = geocodingParams(this.options, {\n      access_token: this.options.apiKey\n    });\n    if (\n      params.proximity !== undefined &&\n      params.proximity.lat !== undefined &&\n      params.proximity.lng !== undefined\n    ) {\n      params.proximity = params.proximity.lng + ',' + params.proximity.lat;\n    }\n    getJSON(this.options.serviceUrl + encodeURIComponent(query) + '.json', params, data => {\n      const results: GeocodingResult[] = [];\n      if (data.features && data.features.length) {\n        for (let i = 0; i <= data.features.length - 1; i++) {\n          const loc = data.features[i];\n          const center = L.latLng(loc.center.reverse());\n          let bbox: L.LatLngBounds;\n          if (loc.bbox) {\n            bbox = L.latLngBounds(\n              L.latLng(loc.bbox.slice(0, 2).reverse()),\n              L.latLng(loc.bbox.slice(2, 4).reverse())\n            );\n          } else {\n            bbox = L.latLngBounds(center, center);\n          }\n\n          results[i] = {\n            name: loc.place_name,\n            bbox: bbox,\n            center: center,\n            properties: this._getProperties(loc)\n          };\n        }\n      }\n\n      cb.call(context, results);\n    });\n  }\n\n  suggest(query: string, cb: GeocodingCallback, context?: any): void {\n    return this.geocode(query, cb, context);\n  }\n\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    const url = this.options.serviceUrl + location.lng + ',' + location.lat + '.json';\n    const param = reverseParams(this.options, {\n      access_token: this.options.apiKey\n    });\n    getJSON(url, param, data => {\n      const results: GeocodingResult[] = [];\n      if (data.features && data.features.length) {\n        for (let i = 0; i <= data.features.length - 1; i++) {\n          const loc = data.features[i];\n          const center = L.latLng(loc.center.reverse());\n          let bbox: L.LatLngBounds;\n          if (loc.bbox) {\n            bbox = L.latLngBounds(\n              L.latLng(loc.bbox.slice(0, 2).reverse()),\n              L.latLng(loc.bbox.slice(2, 4).reverse())\n            );\n          } else {\n            bbox = L.latLngBounds(center, center);\n          }\n          results[i] = {\n            name: loc.place_name,\n            bbox: bbox,\n            center: center,\n            properties: this._getProperties(loc)\n          };\n        }\n      }\n\n      cb.call(context, results);\n    });\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Mapbox}\n * @param options the options\n */\nexport function mapbox(options?: Partial<MapboxOptions>) {\n  return new Mapbox(options);\n}\n","import * as L from 'leaflet';\nimport { getJSON } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\nexport interface MapQuestOptions extends GeocoderOptions {}\n\n/**\n * Implementation of the [MapQuest Geocoding API](http://developer.mapquest.com/web/products/dev-services/geocoding-ws)\n */\nexport class MapQuest implements IGeocoder {\n  options: MapQuestOptions = {\n    serviceUrl: 'https://www.mapquestapi.com/geocoding/v1'\n  };\n\n  constructor(options?: Partial<MapQuestOptions>) {\n    L.Util.setOptions(this, options);\n    // MapQuest seems to provide URI encoded API keys,\n    // so to avoid encoding them twice, we decode them here\n    this.options.apiKey = decodeURIComponent(this.options.apiKey);\n  }\n\n  _formatName(...parts: string[]) {\n    return parts.filter(s => !!s).join(', ');\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    const params = geocodingParams(this.options, {\n      key: this.options.apiKey,\n      location: query,\n      limit: 5,\n      outFormat: 'json'\n    });\n    getJSON(\n      this.options.serviceUrl + '/address',\n      params,\n      L.Util.bind(function(data) {\n        const results: GeocodingResult[] = [];\n        if (data.results && data.results[0].locations) {\n          for (let i = data.results[0].locations.length - 1; i >= 0; i--) {\n            const loc = data.results[0].locations[i];\n            const center = L.latLng(loc.latLng);\n            results[i] = {\n              name: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n              bbox: L.latLngBounds(center, center),\n              center: center\n            };\n          }\n        }\n\n        cb.call(context, results);\n      }, this)\n    );\n  }\n\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    const params = reverseParams(this.options, {\n      key: this.options.apiKey,\n      location: location.lat + ',' + location.lng,\n      outputFormat: 'json'\n    });\n    getJSON(\n      this.options.serviceUrl + '/reverse',\n      params,\n      L.Util.bind(function(data) {\n        const results: GeocodingResult[] = [];\n        if (data.results && data.results[0].locations) {\n          for (let i = data.results[0].locations.length - 1; i >= 0; i--) {\n            const loc = data.results[0].locations[i];\n            const center = L.latLng(loc.latLng);\n            results[i] = {\n              name: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n              bbox: L.latLngBounds(center, center),\n              center: center\n            };\n          }\n        }\n\n        cb.call(context, results);\n      }, this)\n    );\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link MapQuest}\n * @param options the options\n */\nexport function mapQuest(options?: Partial<MapQuestOptions>) {\n  return new MapQuest(options);\n}\n","import * as L from 'leaflet';\nimport { getJSON } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\nexport interface NeutrinoOptions extends GeocoderOptions {\n  userId: string;\n}\n\n/**\n * Implementation of the [Neutrino API](https://www.neutrinoapi.com/api/geocode-address/)\n */\nexport class Neutrino implements IGeocoder {\n  options: NeutrinoOptions = {\n    userId: undefined,\n    apiKey: undefined,\n    serviceUrl: 'https://neutrinoapi.com/'\n  };\n\n  constructor(options?: Partial<NeutrinoOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  // https://www.neutrinoapi.com/api/geocode-address/\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    const params = geocodingParams(this.options, {\n      apiKey: this.options.apiKey,\n      userId: this.options.userId,\n      //get three words and make a dot based string\n      address: query.split(/\\s+/).join('.')\n    });\n    getJSON(this.options.serviceUrl + 'geocode-address', params, data => {\n      const results: GeocodingResult[] = [];\n      if (data.locations) {\n        data.geometry = data.locations[0];\n        const center = L.latLng(data.geometry['latitude'], data.geometry['longitude']);\n        const bbox = L.latLngBounds(center, center);\n        results[0] = {\n          name: data.geometry.address,\n          bbox: bbox,\n          center: center\n        };\n      }\n\n      cb.call(context, results);\n    });\n  }\n\n  suggest(query: string, cb: GeocodingCallback, context?: any): void {\n    return this.geocode(query, cb, context);\n  }\n\n  // https://www.neutrinoapi.com/api/geocode-reverse/\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    const params = reverseParams(this.options, {\n      apiKey: this.options.apiKey,\n      userId: this.options.userId,\n      latitude: location.lat,\n      longitude: location.lng\n    });\n    getJSON(this.options.serviceUrl + 'geocode-reverse', params, data => {\n      const results: GeocodingResult[] = [];\n      if (data.status.status == 200 && data.found) {\n        const center = L.latLng(location.lat, location.lng);\n        const bbox = L.latLngBounds(center, center);\n        results[0] = {\n          name: data.address,\n          bbox: bbox,\n          center: center\n        };\n      }\n      cb.call(context, results);\n    });\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Neutrino}\n * @param options the options\n */\nexport function neutrino(options?: Partial<NeutrinoOptions>) {\n  return new Neutrino(options);\n}\n","import * as L from 'leaflet';\nimport { template, getJSON } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\nexport interface NominatimResult {\n  place_id: number;\n  licence: string;\n  osm_type: string;\n  osm_id: number;\n  boundingbox: string[];\n  lat: string;\n  lon: string;\n  display_name: string;\n  class: string;\n  type: string;\n  importance: number;\n  icon?: string;\n  address: NominatimAddress;\n}\n\nexport interface NominatimAddress {\n  building?: string;\n  city_district?: string;\n  city?: string;\n  country_code?: string;\n  country?: string;\n  county?: string;\n  hamlet?: string;\n  house_number?: string;\n  neighbourhood?: string;\n  postcode?: string;\n  road?: string;\n  state_district?: string;\n  state?: string;\n  suburb?: string;\n  village?: string;\n}\n\nexport interface NominatimOptions extends GeocoderOptions {\n  /**\n   * Additional URL parameters (strings) that will be added to geocoding requests; can be used to restrict results to a specific country for example, by providing the [`countrycodes`](https://wiki.openstreetmap.org/wiki/Nominatim#Parameters) parameter to Nominatim\n   */\n  geocodingQueryParams?: Record<string, unknown>;\n  /**\n   * A function that takes an GeocodingResult as argument and returns an HTML formatted string that represents the result. Default function breaks up address in parts from most to least specific, in attempt to increase readability compared to Nominatim's naming\n   */\n  htmlTemplate: (r: NominatimResult) => string;\n}\n\n/**\n * Implementation of the [Nominatim](https://wiki.openstreetmap.org/wiki/Nominatim) geocoder.\n *\n * This is the default geocoding service used by the control, unless otherwise specified in the options.\n *\n * Unless using your own Nominatim installation, please refer to the [Nominatim usage policy](https://operations.osmfoundation.org/policies/nominatim/).\n */\nexport class Nominatim implements IGeocoder {\n  options: NominatimOptions = {\n    serviceUrl: 'https://nominatim.openstreetmap.org/',\n    htmlTemplate: function(r: NominatimResult) {\n      const address = r.address;\n      let className: string;\n      const parts = [];\n      if (address.road || address.building) {\n        parts.push('{building} {road} {house_number}');\n      }\n\n      if (address.city || (address as any).town || address.village || address.hamlet) {\n        className = parts.length > 0 ? 'leaflet-control-geocoder-address-detail' : '';\n        parts.push(\n          '<span class=\"' + className + '\">{postcode} {city} {town} {village} {hamlet}</span>'\n        );\n      }\n\n      if (address.state || address.country) {\n        className = parts.length > 0 ? 'leaflet-control-geocoder-address-context' : '';\n        parts.push('<span class=\"' + className + '\">{state} {country}</span>');\n      }\n\n      return template(parts.join('<br/>'), address);\n    }\n  };\n\n  constructor(options?: Partial<NominatimOptions>) {\n    L.Util.setOptions(this, options || {});\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any) {\n    const params = geocodingParams(this.options, {\n      q: query,\n      limit: 5,\n      format: 'json',\n      addressdetails: 1\n    });\n    getJSON(this.options.serviceUrl + 'search', params, data => {\n      const results: GeocodingResult[] = [];\n      for (let i = data.length - 1; i >= 0; i--) {\n        const bbox = data[i].boundingbox;\n        for (let j = 0; j < 4; j++) bbox[j] = +bbox[j];\n        results[i] = {\n          icon: data[i].icon,\n          name: data[i].display_name,\n          html: this.options.htmlTemplate ? this.options.htmlTemplate(data[i]) : undefined,\n          bbox: L.latLngBounds([bbox[0], bbox[2]], [bbox[1], bbox[3]]),\n          center: L.latLng(data[i].lat, data[i].lon),\n          properties: data[i]\n        };\n      }\n      cb.call(context, results);\n    });\n  }\n\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any) {\n    const params = reverseParams(this.options, {\n      lat: location.lat,\n      lon: location.lng,\n      zoom: Math.round(Math.log(scale / 256) / Math.log(2)),\n      addressdetails: 1,\n      format: 'json'\n    });\n    getJSON(this.options.serviceUrl + 'reverse', params, data => {\n      const result: GeocodingResult[] = [];\n      if (data && data.lat && data.lon) {\n        const center = L.latLng(data.lat, data.lon);\n        const bbox = L.latLngBounds(center, center);\n        result.push({\n          name: data.display_name,\n          html: this.options.htmlTemplate ? this.options.htmlTemplate(data) : undefined,\n          center: center,\n          bbox: bbox,\n          properties: data\n        });\n      }\n      cb.call(context, result);\n    });\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Nominatim}\n * @param options the options\n */\nexport function nominatim(options?: Partial<NominatimOptions>) {\n  return new Nominatim(options);\n}\n","import * as L from 'leaflet';\nimport { IGeocoder, GeocodingCallback, GeocodingResult } from './api';\n\nexport interface OpenLocationCodeOptions {\n  OpenLocationCode: OpenLocationCodeApi;\n  codeLength?: number;\n}\n\nexport interface OpenLocationCodeApi {\n  encode(latitude: number, longitude: number, codeLength?: number): string;\n  decode(code: string): CodeArea;\n}\n\nexport interface CodeArea {\n  latitudeLo: number;\n  longitudeLo: number;\n  latitudeHi: number;\n  longitudeHi: number;\n  latitudeCenter: number;\n  longitudeCenter: number;\n  codeLength: number;\n}\n\n/**\n * Implementation of the [Plus codes](https://plus.codes/) (formerly OpenLocationCode) (requires [open-location-code](https://www.npmjs.com/package/open-location-code))\n */\nexport class OpenLocationCode implements IGeocoder {\n  options: OpenLocationCodeOptions;\n  constructor(options?: Partial<OpenLocationCodeOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any) {\n    try {\n      const decoded = this.options.OpenLocationCode.decode(query);\n      const result: GeocodingResult = {\n        name: query,\n        center: L.latLng(decoded.latitudeCenter, decoded.longitudeCenter),\n        bbox: L.latLngBounds(\n          L.latLng(decoded.latitudeLo, decoded.longitudeLo),\n          L.latLng(decoded.latitudeHi, decoded.longitudeHi)\n        )\n      };\n      cb.call(context, [result]);\n    } catch (e) {\n      console.warn(e); // eslint-disable-line no-console\n      cb.call(context, []);\n    }\n  }\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any) {\n    try {\n      const code = this.options.OpenLocationCode.encode(\n        location.lat,\n        location.lng,\n        this.options.codeLength\n      );\n      const result = {\n        name: code,\n        center: L.latLng(location.lat, location.lng),\n        bbox: L.latLngBounds(\n          L.latLng(location.lat, location.lng),\n          L.latLng(location.lat, location.lng)\n        )\n      };\n      cb.call(context, [result]);\n    } catch (e) {\n      console.warn(e); // eslint-disable-line no-console\n      cb.call(context, []);\n    }\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link OpenLocationCode}\n * @param options the options\n */\nexport function openLocationCode(options?: Partial<OpenLocationCodeOptions>) {\n  return new OpenLocationCode(options);\n}\n","import * as L from 'leaflet';\nimport { getJSON } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\nexport interface OpenCageOptions extends GeocoderOptions {}\n\n/**\n * Implementation of the [OpenCage Data API](https://opencagedata.com/)\n */\nexport class OpenCage implements IGeocoder {\n  options: OpenCageOptions = {\n    serviceUrl: 'https://api.opencagedata.com/geocode/v1/json'\n  };\n\n  constructor(options?: Partial<OpenCageOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    const params = geocodingParams(this.options, {\n      key: this.options.apiKey,\n      q: query\n    });\n    getJSON(this.options.serviceUrl, params, data => {\n      const results: GeocodingResult[] = [];\n      if (data.results && data.results.length) {\n        for (let i = 0; i < data.results.length; i++) {\n          const loc = data.results[i];\n          const center = L.latLng(loc.geometry);\n          let bbox: L.LatLngBounds;\n          if (loc.annotations && loc.annotations.bounds) {\n            bbox = L.latLngBounds(\n              L.latLng(loc.annotations.bounds.northeast),\n              L.latLng(loc.annotations.bounds.southwest)\n            );\n          } else {\n            bbox = L.latLngBounds(center, center);\n          }\n          results.push({\n            name: loc.formatted,\n            bbox: bbox,\n            center: center\n          });\n        }\n      }\n      cb.call(context, results);\n    });\n  }\n\n  suggest(query: string, cb: GeocodingCallback, context?: any): void {\n    return this.geocode(query, cb, context);\n  }\n\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    const params = reverseParams(this.options, {\n      key: this.options.apiKey,\n      q: [location.lat, location.lng].join(',')\n    });\n    getJSON(this.options.serviceUrl, params, data => {\n      const results: GeocodingResult[] = [];\n      if (data.results && data.results.length) {\n        for (let i = 0; i < data.results.length; i++) {\n          const loc = data.results[i];\n          const center = L.latLng(loc.geometry);\n          let bbox: L.LatLngBounds;\n          if (loc.annotations && loc.annotations.bounds) {\n            bbox = L.latLngBounds(\n              L.latLng(loc.annotations.bounds.northeast),\n              L.latLng(loc.annotations.bounds.southwest)\n            );\n          } else {\n            bbox = L.latLngBounds(center, center);\n          }\n          results.push({\n            name: loc.formatted,\n            bbox: bbox,\n            center: center\n          });\n        }\n      }\n      cb.call(context, results);\n    });\n  }\n}\n\nexport function opencage(options?: Partial<OpenCageOptions>) {\n  return new OpenCage(options);\n}\n","import * as L from 'leaflet';\nimport { getJSON } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\nexport interface PeliasOptions extends GeocoderOptions {}\n\n/**\n * Implementation of the [Pelias](https://pelias.io/), [geocode.earth](https://geocode.earth/) geocoder (formerly Mapzen Search)\n */\nexport class Pelias implements IGeocoder {\n  options: PeliasOptions = {\n    serviceUrl: 'https://api.geocode.earth/v1'\n  };\n\n  private _lastSuggest = 0;\n\n  constructor(options?: Partial<PeliasOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    const params = geocodingParams(this.options, {\n      api_key: this.options.apiKey,\n      text: query\n    });\n    getJSON(this.options.serviceUrl + '/search', params, data => {\n      cb.call(context, this._parseResults(data, 'bbox'));\n    });\n  }\n\n  suggest(query: string, cb: GeocodingCallback, context?: any): void {\n    const params = geocodingParams(this.options, {\n      api_key: this.options.apiKey,\n      text: query\n    });\n    getJSON(this.options.serviceUrl + '/autocomplete', params, data => {\n      if (data.geocoding.timestamp > this._lastSuggest) {\n        this._lastSuggest = data.geocoding.timestamp;\n        cb.call(context, this._parseResults(data, 'bbox'));\n      }\n    });\n  }\n\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    const params = reverseParams(this.options, {\n      api_key: this.options.apiKey,\n      'point.lat': location.lat,\n      'point.lon': location.lng\n    });\n    getJSON(this.options.serviceUrl + '/reverse', params, data => {\n      cb.call(context, this._parseResults(data, 'bounds'));\n    });\n  }\n\n  _parseResults(data, bboxname) {\n    const results: GeocodingResult[] = [];\n    L.geoJSON(data, {\n      pointToLayer: function(feature, latlng) {\n        return L.circleMarker(latlng);\n      },\n      onEachFeature: function(feature, layer: any) {\n        const result = {} as GeocodingResult;\n        let bbox;\n        let center;\n\n        if (layer.getBounds) {\n          bbox = layer.getBounds();\n          center = bbox.getCenter();\n        } else if (layer.feature.bbox) {\n          center = layer.getLatLng();\n          bbox = L.latLngBounds(\n            L.GeoJSON.coordsToLatLng(layer.feature.bbox.slice(0, 2)),\n            L.GeoJSON.coordsToLatLng(layer.feature.bbox.slice(2, 4))\n          );\n        } else {\n          center = layer.getLatLng();\n          bbox = L.latLngBounds(center, center);\n        }\n\n        result.name = layer.feature.properties.label;\n        result.center = center;\n        result[bboxname] = bbox;\n        result.properties = layer.feature.properties;\n        results.push(result);\n      }\n    });\n    return results;\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Pelias}\n * @param options the options\n */\nexport function pelias(options?: Partial<PeliasOptions>) {\n  return new Pelias(options);\n}\n\nexport const GeocodeEarth = Pelias;\nexport const geocodeEarth = pelias;\n\n/**\n * r.i.p.\n * @deprecated\n */\nexport const Mapzen = Pelias;\n/**\n * r.i.p.\n * @deprecated\n */\nexport const mapzen = pelias;\n\n/**\n * Implementation of the [Openrouteservice](https://openrouteservice.org/dev/#/api-docs/geocode) geocoder\n */\nexport class Openrouteservice extends Pelias {\n  constructor(options?: Partial<PeliasOptions>) {\n    super(\n      L.Util.extend(\n        {\n          serviceUrl: 'https://api.openrouteservice.org/geocode'\n        },\n        options\n      )\n    );\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Openrouteservice}\n * @param options the options\n */\nexport function openrouteservice(options?: Partial<PeliasOptions>) {\n  return new Openrouteservice(options);\n}\n","import * as L from 'leaflet';\nimport { getJSON } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\nexport interface PhotonOptions extends GeocoderOptions {\n  reverseUrl: string;\n  nameProperties: string[];\n  htmlTemplate?: (r: any) => string;\n}\n\n/**\n * Implementation of the [Photon](http://photon.komoot.de/) geocoder\n */\nexport class Photon implements IGeocoder {\n  options: PhotonOptions = {\n    serviceUrl: 'https://photon.komoot.io/api/',\n    reverseUrl: 'https://photon.komoot.io/reverse/',\n    nameProperties: ['name', 'street', 'suburb', 'hamlet', 'town', 'city', 'state', 'country']\n  };\n\n  constructor(options?: Partial<PhotonOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    const params = geocodingParams(this.options, { q: query });\n    getJSON(\n      this.options.serviceUrl,\n      params,\n      L.Util.bind(function(data) {\n        cb.call(context, this._decodeFeatures(data));\n      }, this)\n    );\n  }\n\n  suggest(query: string, cb: GeocodingCallback, context?: any): void {\n    return this.geocode(query, cb, context);\n  }\n\n  reverse(latLng: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    const params = reverseParams(this.options, {\n      lat: latLng.lat,\n      lon: latLng.lng\n    });\n    getJSON(\n      this.options.reverseUrl,\n      params,\n      L.Util.bind(function(data) {\n        cb.call(context, this._decodeFeatures(data));\n      }, this)\n    );\n  }\n\n  _decodeFeatures(data: GeoJSON.FeatureCollection<GeoJSON.Point>) {\n    const results: GeocodingResult[] = [];\n\n    if (data && data.features) {\n      for (let i = 0; i < data.features.length; i++) {\n        const f = data.features[i];\n        const c = f.geometry.coordinates;\n        const center = L.latLng(c[1], c[0]);\n        const extent = f.properties.extent;\n\n        const bbox = extent\n          ? L.latLngBounds([extent[1], extent[0]], [extent[3], extent[2]])\n          : L.latLngBounds(center, center);\n\n        results.push({\n          name: this._decodeFeatureName(f),\n          html: this.options.htmlTemplate ? this.options.htmlTemplate(f) : undefined,\n          center: center,\n          bbox: bbox,\n          properties: f.properties\n        });\n      }\n    }\n\n    return results;\n  }\n\n  _decodeFeatureName(f: GeoJSON.Feature) {\n    return (this.options.nameProperties || [])\n      .map(p => {\n        return f.properties[p];\n      })\n      .filter(v => {\n        return !!v;\n      })\n      .join(', ');\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Photon}\n * @param options the options\n */\nexport function photon(options?: Partial<PhotonOptions>) {\n  return new Photon(options);\n}\n","import * as L from 'leaflet';\nimport { getJSON } from '../util';\nimport {\n  IGeocoder,\n  GeocoderOptions,\n  GeocodingCallback,\n  geocodingParams,\n  GeocodingResult,\n  reverseParams\n} from './api';\n\nexport interface What3WordsOptions extends GeocoderOptions {}\n\n/**\n * Implementation of the What3Words service\n */\nexport class What3Words implements IGeocoder {\n  options: What3WordsOptions = {\n    serviceUrl: 'https://api.what3words.com/v2/'\n  };\n\n  constructor(options: Partial<What3WordsOptions>) {\n    L.Util.setOptions(this, options);\n  }\n\n  geocode(query: string, cb: GeocodingCallback, context?: any): void {\n    //get three words and make a dot based string\n    getJSON(\n      this.options.serviceUrl + 'forward',\n      geocodingParams(this.options, {\n        key: this.options.apiKey,\n        addr: query.split(/\\s+/).join('.')\n      }),\n      data => {\n        const results: GeocodingResult[] = [];\n        if (data.geometry) {\n          const latLng = L.latLng(data.geometry['lat'], data.geometry['lng']);\n          const latLngBounds = L.latLngBounds(latLng, latLng);\n          results[0] = {\n            name: data.words,\n            bbox: latLngBounds,\n            center: latLng\n          };\n        }\n\n        cb.call(context, results);\n      }\n    );\n  }\n\n  suggest(query: string, cb: GeocodingCallback, context?: any): void {\n    return this.geocode(query, cb, context);\n  }\n\n  reverse(location: L.LatLngLiteral, scale: number, cb: GeocodingCallback, context?: any): void {\n    getJSON(\n      this.options.serviceUrl + 'reverse',\n      reverseParams(this.options, {\n        key: this.options.apiKey,\n        coords: [location.lat, location.lng].join(',')\n      }),\n      data => {\n        const results: GeocodingResult[] = [];\n        if (data.status.status == 200) {\n          const center = L.latLng(data.geometry['lat'], data.geometry['lng']);\n          const bbox = L.latLngBounds(center, center);\n          results[0] = {\n            name: data.words,\n            bbox: bbox,\n            center: center\n          };\n        }\n        cb.call(context, results);\n      }\n    );\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link What3Words}\n * @param options the options\n */\nexport function what3words(options: Partial<What3WordsOptions>) {\n  return new What3Words(options);\n}\n","import * as L from 'leaflet';\nimport { Nominatim } from './geocoders/index';\nimport { IGeocoder, GeocodingResult } from './geocoders/api';\n\nexport interface GeocoderControlOptions extends L.ControlOptions {\n  /**\n   * Collapse control unless hovered/clicked\n   */\n  collapsed: boolean;\n  /**\n   * How to expand a collapsed control: `touch` or `click` or `hover`\n   */\n  expand: 'touch' | 'click' | 'hover';\n  /**\n   * Placeholder text for text input\n   */\n  placeholder: string;\n  /**\n   * Message when no result found / geocoding error occurs\n   */\n  errorMessage: string;\n  /**\n   * Accessibility label for the search icon used by screen readers\n   */\n  iconLabel: string;\n  /**\n   * Object to perform the actual geocoding queries\n   */\n  geocoder?: IGeocoder;\n  /**\n   * Immediately show the unique result without prompting for alternatives\n   */\n  showUniqueResult: boolean;\n  /**\n   * Show icons for geocoding results (if available); supported by Nominatim\n   */\n  showResultIcons: boolean;\n  /**\n   * Minimum number characters before suggest functionality is used (if available from geocoder)\n   */\n  suggestMinLength: number;\n  /**\n   * Number of milliseconds after typing stopped before suggest functionality is used (if available from geocoder)\n   */\n  suggestTimeout: number;\n  /**\n   * Initial query string for text input\n   */\n  query: string;\n  /**\n   * Minimum number of characters in search text before performing a query\n   */\n  queryMinLength: number;\n  /**\n   * Whether to mark a geocoding result on the map by default\n   */\n  defaultMarkGeocode: boolean;\n}\n\n/**\n * Event is fired when selecting a geocode result.\n * By default, the control will center the map on it and place a marker at its location.\n * To remove the control's default handler for marking a result, set {@link GeocoderControlOptions.defaultMarkGeocode} to `false`.\n */\nexport type MarkGeocodeEvent = { geocode: GeocodingResult };\nexport type MarkGeocodeEventHandlerFn = (event: MarkGeocodeEvent) => void;\n\n/**\n * Event is fired before invoking {@link IGeocoder.geocode} (or {@link IGeocoder.suggest}).\n * The event data contains the query string as `input`.\n */\nexport type StartGeocodeEvent = { input: string };\nexport type StartGeocodeEventHandlerFn = (event: StartGeocodeEvent) => void;\n\n/**\n * Event is fired before after receiving results from {@link IGeocoder.geocode} (or {@link IGeocoder.suggest}).\n * The event data contains the query string as `input` and the geocoding `results`.\n */\nexport type FinishGeocodeEvent = { input: string; results: GeocodingResult[] };\nexport type FinishGeocodeEventHandlerFn = (event: FinishGeocodeEvent) => void;\n\ndeclare module 'leaflet' {\n  interface Evented {\n    on(type: 'markgeocode', fn: MarkGeocodeEventHandlerFn, context?: any): this;\n    on(type: 'startgeocode', fn: StartGeocodeEventHandlerFn, context?: any): this;\n    on(type: 'startsuggest', fn: StartGeocodeEventHandlerFn, context?: any): this;\n    on(type: 'finishsuggest', fn: FinishGeocodeEventHandlerFn, context?: any): this;\n    on(type: 'finishgeocode', fn: FinishGeocodeEventHandlerFn, context?: any): this;\n  }\n}\n\n/**\n * Leaflet mixins https://leafletjs.com/reference-1.7.1.html#class-includes\n * for TypeScript https://www.typescriptlang.org/docs/handbook/mixins.html\n * @internal\n */\nclass EventedControl {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  constructor(...args: any[]) {\n    // empty\n  }\n}\n\n/**\n * @internal\n */\ninterface EventedControl extends L.Control, L.Evented {}\nL.Util.extend(EventedControl.prototype, L.Control.prototype);\nL.Util.extend(EventedControl.prototype, L.Evented.prototype);\n\n/**\n * This is the geocoder control. It works like any other [Leaflet control](https://leafletjs.com/reference.html#control), and is added to the map.\n */\nexport class GeocoderControl extends EventedControl {\n  options: GeocoderControlOptions = {\n    showUniqueResult: true,\n    showResultIcons: false,\n    collapsed: true,\n    expand: 'touch',\n    position: 'topright',\n    placeholder: 'Search...',\n    errorMessage: 'Nothing found.',\n    iconLabel: 'Initiate a new search',\n    query: '',\n    queryMinLength: 1,\n    suggestMinLength: 3,\n    suggestTimeout: 250,\n    defaultMarkGeocode: true\n  };\n\n  private _alts: HTMLUListElement;\n  private _container: HTMLDivElement;\n  private _errorElement: HTMLDivElement;\n  private _form: HTMLDivElement;\n  private _geocodeMarker: L.Marker;\n  private _input: HTMLInputElement;\n  private _lastGeocode: string;\n  private _map: L.Map;\n  private _preventBlurCollapse: boolean;\n  private _requestCount = 0;\n  private _results: any;\n  private _selection: any;\n  private _suggestTimeout: any;\n\n  /**\n   * Instantiates a geocoder control (to be invoked using `new`)\n   * @param options the options\n   */\n  constructor(options?: Partial<GeocoderControlOptions>) {\n    super(options);\n    L.Util.setOptions(this, options);\n    if (!this.options.geocoder) {\n      this.options.geocoder = new Nominatim();\n    }\n  }\n\n  addThrobberClass() {\n    L.DomUtil.addClass(this._container, 'leaflet-control-geocoder-throbber');\n  }\n\n  removeThrobberClass() {\n    L.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-throbber');\n  }\n\n  /**\n   * Returns the container DOM element for the control and add listeners on relevant map events.\n   * @param map the map instance\n   * @see https://leafletjs.com/reference.html#control-onadd\n   */\n  onAdd(map: L.Map) {\n    const className = 'leaflet-control-geocoder';\n    const container = L.DomUtil.create('div', className + ' leaflet-bar') as HTMLDivElement;\n    const icon = L.DomUtil.create('button', className + '-icon', container) as HTMLButtonElement;\n    const form = (this._form = L.DomUtil.create(\n      'div',\n      className + '-form',\n      container\n    ) as HTMLDivElement);\n\n    this._map = map;\n    this._container = container;\n\n    icon.innerHTML = '&nbsp;';\n    icon.type = 'button';\n    icon.setAttribute('aria-label', this.options.iconLabel);\n\n    const input = (this._input = L.DomUtil.create('input', '', form) as HTMLInputElement);\n    input.type = 'text';\n    input.value = this.options.query;\n    input.placeholder = this.options.placeholder;\n    L.DomEvent.disableClickPropagation(input);\n\n    this._errorElement = L.DomUtil.create(\n      'div',\n      className + '-form-no-error',\n      container\n    ) as HTMLDivElement;\n    this._errorElement.innerHTML = this.options.errorMessage;\n\n    this._alts = L.DomUtil.create(\n      'ul',\n      className + '-alternatives leaflet-control-geocoder-alternatives-minimized',\n      container\n    ) as HTMLUListElement;\n    L.DomEvent.disableClickPropagation(this._alts);\n\n    L.DomEvent.addListener(input, 'keydown', this._keydown, this);\n    if (this.options.geocoder.suggest) {\n      L.DomEvent.addListener(input, 'input', this._change, this);\n    }\n    L.DomEvent.addListener(input, 'blur', () => {\n      if (this.options.collapsed && !this._preventBlurCollapse) {\n        this._collapse();\n      }\n      this._preventBlurCollapse = false;\n    });\n\n    if (this.options.collapsed) {\n      if (this.options.expand === 'click') {\n        L.DomEvent.addListener(container, 'click', (e: Event) => {\n          if ((e as MouseEvent).button === 0 && (e as MouseEvent).detail !== 2) {\n            this._toggle();\n          }\n        });\n      } else if (this.options.expand === 'touch') {\n        L.DomEvent.addListener(\n          container,\n          L.Browser.touch ? 'touchstart mousedown' : 'mousedown',\n          (e: Event) => {\n            this._toggle();\n            e.preventDefault(); // mobile: clicking focuses the icon, so UI expands and immediately collapses\n            e.stopPropagation();\n          },\n          this\n        );\n      } else {\n        L.DomEvent.addListener(container, 'mouseover', this._expand, this);\n        L.DomEvent.addListener(container, 'mouseout', this._collapse, this);\n        this._map.on('movestart', this._collapse, this);\n      }\n    } else {\n      this._expand();\n      if (L.Browser.touch) {\n        L.DomEvent.addListener(container, 'touchstart', () => this._geocode());\n      } else {\n        L.DomEvent.addListener(container, 'click', () => this._geocode());\n      }\n    }\n\n    if (this.options.defaultMarkGeocode) {\n      this.on('markgeocode', this.markGeocode, this);\n    }\n\n    this.on('startgeocode', this.addThrobberClass, this);\n    this.on('finishgeocode', this.removeThrobberClass, this);\n    this.on('startsuggest', this.addThrobberClass, this);\n    this.on('finishsuggest', this.removeThrobberClass, this);\n\n    L.DomEvent.disableClickPropagation(container);\n\n    return container;\n  }\n\n  /**\n   * Sets the query string on the text input\n   * @param string the query string\n   */\n  setQuery(string: string): this {\n    this._input.value = string;\n    return this;\n  }\n\n  private _geocodeResult(results: GeocodingResult[], suggest: boolean) {\n    if (!suggest && this.options.showUniqueResult && results.length === 1) {\n      this._geocodeResultSelected(results[0]);\n    } else if (results.length > 0) {\n      this._alts.innerHTML = '';\n      this._results = results;\n      L.DomUtil.removeClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n      L.DomUtil.addClass(this._container, 'leaflet-control-geocoder-options-open');\n      for (let i = 0; i < results.length; i++) {\n        this._alts.appendChild(this._createAlt(results[i], i));\n      }\n    } else {\n      L.DomUtil.addClass(this._container, 'leaflet-control-geocoder-options-error');\n      L.DomUtil.addClass(this._errorElement, 'leaflet-control-geocoder-error');\n    }\n  }\n\n  /**\n   * Marks a geocoding result on the map\n   * @param result the geocoding result\n   */\n  markGeocode(event: MarkGeocodeEvent) {\n    const result = event.geocode;\n\n    this._map.fitBounds(result.bbox);\n\n    if (this._geocodeMarker) {\n      this._map.removeLayer(this._geocodeMarker);\n    }\n\n    this._geocodeMarker = new L.Marker(result.center)\n      .bindPopup(result.html || result.name)\n      .addTo(this._map)\n      .openPopup();\n\n    return this;\n  }\n\n  private _geocode(suggest?: boolean) {\n    const value = this._input.value;\n    if (!suggest && value.length < this.options.queryMinLength) {\n      return;\n    }\n\n    const requestCount = ++this._requestCount;\n    const cb = (results: GeocodingResult[]) => {\n      if (requestCount === this._requestCount) {\n        const event: FinishGeocodeEvent = { input: value, results };\n        this.fire(suggest ? 'finishsuggest' : 'finishgeocode', event);\n        this._geocodeResult(results, suggest);\n      }\n    };\n\n    this._lastGeocode = value;\n    if (!suggest) {\n      this._clearResults();\n    }\n\n    const event: StartGeocodeEvent = { input: value };\n    this.fire(suggest ? 'startsuggest' : 'startgeocode', event);\n    if (suggest) {\n      this.options.geocoder.suggest(value, cb);\n    } else {\n      this.options.geocoder.geocode(value, cb);\n    }\n  }\n\n  private _geocodeResultSelected(geocode: GeocodingResult) {\n    const event: MarkGeocodeEvent = { geocode };\n    this.fire('markgeocode', event);\n  }\n\n  private _toggle() {\n    if (L.DomUtil.hasClass(this._container, 'leaflet-control-geocoder-expanded')) {\n      this._collapse();\n    } else {\n      this._expand();\n    }\n  }\n\n  private _expand() {\n    L.DomUtil.addClass(this._container, 'leaflet-control-geocoder-expanded');\n    this._input.select();\n    this.fire('expand');\n  }\n\n  private _collapse() {\n    L.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-expanded');\n    L.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n    L.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n    L.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-open');\n    L.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-error');\n    this._input.blur(); // mobile: keyboard shouldn't stay expanded\n    this.fire('collapse');\n  }\n\n  private _clearResults() {\n    L.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n    this._selection = null;\n    L.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n    L.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-open');\n    L.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-error');\n  }\n\n  private _createAlt(result: GeocodingResult, index: number) {\n    const li = L.DomUtil.create('li', ''),\n      a = L.DomUtil.create('a', '', li),\n      icon =\n        this.options.showResultIcons && result.icon\n          ? (L.DomUtil.create('img', '', a) as HTMLImageElement)\n          : null,\n      text = result.html ? undefined : document.createTextNode(result.name),\n      mouseDownHandler = (e: Event) => {\n        // In some browsers, a click will fire on the map if the control is\n        // collapsed directly after mousedown. To work around this, we\n        // wait until the click is completed, and _then_ collapse the\n        // control. Messy, but this is the workaround I could come up with\n        // for #142.\n        this._preventBlurCollapse = true;\n        L.DomEvent.stop(e);\n        this._geocodeResultSelected(result);\n        L.DomEvent.on(li, 'click touchend', () => {\n          if (this.options.collapsed) {\n            this._collapse();\n          } else {\n            this._clearResults();\n          }\n        });\n      };\n\n    if (icon) {\n      icon.src = result.icon;\n    }\n\n    li.setAttribute('data-result-index', String(index));\n\n    if (result.html) {\n      a.innerHTML = a.innerHTML + result.html;\n    } else if (text) {\n      a.appendChild(text);\n    }\n\n    // Use mousedown and not click, since click will fire _after_ blur,\n    // causing the control to have collapsed and removed the items\n    // before the click can fire.\n    L.DomEvent.addListener(li, 'mousedown touchstart', mouseDownHandler, this);\n\n    return li;\n  }\n\n  private _keydown(e: KeyboardEvent) {\n    const select = (dir: number) => {\n      if (this._selection) {\n        L.DomUtil.removeClass(this._selection, 'leaflet-control-geocoder-selected');\n        this._selection = this._selection[dir > 0 ? 'nextSibling' : 'previousSibling'];\n      }\n      if (!this._selection) {\n        this._selection = this._alts[dir > 0 ? 'firstChild' : 'lastChild'];\n      }\n\n      if (this._selection) {\n        L.DomUtil.addClass(this._selection, 'leaflet-control-geocoder-selected');\n      }\n    };\n\n    switch (e.keyCode) {\n      // Escape\n      case 27:\n        if (this.options.collapsed) {\n          this._collapse();\n        } else {\n          this._clearResults();\n        }\n        break;\n      // Up\n      case 38:\n        select(-1);\n        break;\n      // Up\n      case 40:\n        select(1);\n        break;\n      // Enter\n      case 13:\n        if (this._selection) {\n          const index = parseInt(this._selection.getAttribute('data-result-index'), 10);\n          this._geocodeResultSelected(this._results[index]);\n          this._clearResults();\n        } else {\n          this._geocode();\n        }\n        break;\n      default:\n        return;\n    }\n\n    L.DomEvent.preventDefault(e);\n  }\n\n  private _change() {\n    const v = this._input.value;\n    if (v !== this._lastGeocode) {\n      clearTimeout(this._suggestTimeout);\n      if (v.length >= this.options.suggestMinLength) {\n        this._suggestTimeout = setTimeout(() => this._geocode(true), this.options.suggestTimeout);\n      } else {\n        this._clearResults();\n      }\n    }\n  }\n}\n\n/**\n * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link GeocoderControl}\n * @param options the options\n */\nexport function geocoder(options?: Partial<GeocoderControlOptions>) {\n  return new GeocoderControl(options);\n}\n","/* @preserve\n * Leaflet Control Geocoder\n * https://github.com/perliedman/leaflet-control-geocoder\n *\n * Copyright (c) 2012 sa3m (https://github.com/sa3m)\n * Copyright (c) 2018 Per Liedman\n * All rights reserved.\n */\nimport * as L from 'leaflet';\nimport { GeocoderControl as Geocoder, geocoder } from './control';\nimport * as geocoders from './geocoders/index';\n\nL.Util.extend(Geocoder, geocoders);\nexport default Geocoder;\nexport { Geocoder, geocoder, geocoders };\n\nL.Util.extend(L.Control, {\n  Geocoder: Geocoder,\n  geocoder: geocoder\n});\n"],"names":["geocodingParams","options","params","L","Util","extend","geocodingQueryParams","reverseParams","reverseQueryParams","lastCallbackId","badChars","possible","escape","escapeChar","chr","htmlEscape","string","test","replace","jsonp","url","callback","context","jsonpParam","callbackId","window","bind","script","document","createElement","type","src","getParamString","id","getElementsByTagName","appendChild","getJSON","xmlHttp","XMLHttpRequest","onreadystatechange","readyState","message","status","response","JSON","parse","e","open","responseType","setRequestHeader","send","template","str","data","key","value","undefined","obj","existingUrl","uppercase","i","encodeURIComponent","toUpperCase","Array","isArray","push","String","j","length","indexOf","join","ArcGis","constructor","serviceUrl","apiKey","setOptions","geocode","query","cb","token","SingleLine","outFields","forStorage","maxLocations","f","results","candidates","loc","latLng","location","y","x","latLngBounds","extent","ymax","xmax","ymin","xmin","name","address","bbox","center","call","suggest","reverse","scale","lng","lat","distance","result","error","Match_addr","arcgis","Bing","resourceSets","resources","resource","point","coordinates","bing","Google","geometry","viewport","northeast","southwest","formatted_address","properties","address_components","latlng","google","HERE","app_id","app_code","maxResults","Error","searchtext","gen","jsonattributes","maxresults","prox","reverseGeocodeProxRadius","mode","view","displayPosition","latitude","longitude","mapView","topLeft","bottomRight","label","HEREv2","q","limit","at","in","items","item","position","south","west","north","east","here","parseLatLng","match","LatLng","next","sizeInMeters","toBounds","Mapbox","_getProperties","text","split","short_code","access_token","proximity","features","slice","place_name","param","mapbox","MapQuest","decodeURIComponent","_formatName","parts","filter","s","outFormat","locations","street","adminArea4","adminArea3","adminArea1","outputFormat","mapQuest","Neutrino","userId","found","neutrino","Nominatim","htmlTemplate","r","className","road","building","city","town","village","hamlet","state","country","format","addressdetails","boundingbox","icon","display_name","html","lon","zoom","Math","round","log","nominatim","OpenLocationCode","decoded","decode","latitudeCenter","longitudeCenter","latitudeLo","longitudeLo","latitudeHi","longitudeHi","console","warn","code","encode","codeLength","openLocationCode","OpenCage","annotations","bounds","formatted","opencage","Pelias","api_key","_parseResults","geocoding","timestamp","_lastSuggest","bboxname","geoJSON","pointToLayer","feature","circleMarker","onEachFeature","layer","getBounds","getCenter","getLatLng","GeoJSON","coordsToLatLng","pelias","GeocodeEarth","geocodeEarth","Mapzen","mapzen","Openrouteservice","openrouteservice","Photon","reverseUrl","nameProperties","_decodeFeatures","c","_decodeFeatureName","map","p","v","photon","What3Words","addr","words","coords","what3words","EventedControl","args","prototype","Control","Evented","GeocoderControl","showUniqueResult","showResultIcons","collapsed","expand","placeholder","errorMessage","iconLabel","queryMinLength","suggestMinLength","suggestTimeout","defaultMarkGeocode","geocoder","addThrobberClass","DomUtil","addClass","_container","removeThrobberClass","removeClass","onAdd","container","create","form","_form","_map","innerHTML","setAttribute","input","_input","DomEvent","disableClickPropagation","_errorElement","_alts","addListener","_keydown","_change","_preventBlurCollapse","_collapse","button","detail","_toggle","Browser","touch","preventDefault","stopPropagation","_expand","on","_geocode","markGeocode","setQuery","_geocodeResult","_geocodeResultSelected","_results","_createAlt","event","fitBounds","_geocodeMarker","removeLayer","Marker","bindPopup","addTo","openPopup","requestCount","_requestCount","fire","_lastGeocode","_clearResults","hasClass","select","blur","_selection","index","li","a","createTextNode","mouseDownHandler","stop","dir","keyCode","parseInt","getAttribute","clearTimeout","_suggestTimeout","setTimeout","Geocoder","geocoders"],"mappings":"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"}