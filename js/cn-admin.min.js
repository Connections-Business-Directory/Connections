jQuery(document).ready(function(b){b(".connections").cn_preloader({delay:200,imgSelector:".cn-image img.photo, .cn-image img.logo",beforeShow:function(){b(this).closest(".cn-image img").css("visibility","hidden");
},afterShow:function(){}});jQuery(function(){jQuery("a.detailsbutton").css("cursor","pointer").attr("title","Click to show details.").click(function(){jQuery(".child-"+this.id).each(function(c,d){jQuery(d).toggle(jQuery(d).css("display")=="none");
});return false;}).toggle(function(){jQuery(this).html("Hide Details");jQuery(this).attr("title","Click to hide details.");},function(){jQuery(this).html("Show Details");
jQuery(this).attr("title","Click to show details.");});return false;});jQuery(function(){jQuery("input#entry_type_0").click(function(){jQuery("#family").slideUp();
jQuery(".namefield").slideDown();jQuery("#contact_name").slideUp();jQuery(".celebrate").slideDown();jQuery(".celebrate-disabled").slideUp();});});jQuery(function(){jQuery("input#entry_type_1").click(function(){jQuery("#family").slideUp();
jQuery(".namefield").slideUp();jQuery("#contact_name").slideDown();jQuery(".celebrate").slideUp();jQuery(".celebrate-disabled").slideDown();});});jQuery(function(){jQuery("input#entry_type_2").click(function(){jQuery("#family").slideDown();
jQuery(".namefield").slideUp();jQuery(".celebrate").slideUp();jQuery(".celebrate-disabled").slideDown();});});jQuery(function(){var c=(jQuery("input[name^=entry_type]:checked").val());
switch(c){case"individual":jQuery("#family").slideUp();jQuery("#contact_name").slideUp();jQuery(".celebrate-disabled").slideUp();break;case"organization":jQuery("#family").slideUp();
jQuery(".namefield").slideUp();jQuery(".celebrate").slideUp();jQuery(".celebrate-disabled").slideDown();break;case"family":jQuery(".namefield").slideUp();
jQuery(".celebrate").slideUp();jQuery(".celebrate-disabled").slideDown();break;}});b("#add-relation").click(function(){var e=(jQuery("#relation-template").text());
var f=new Date();var c=Math.floor(Math.random()*f.getTime());e=e.replace(new RegExp("::FIELD::","gi"),c);b("#relations").append('<div id="relation-row-'+c+'" class="relation" style="display: none;">'+e+'<a href="#" class="cn-remove cn-button button button-warning" data-type="relation" data-token="'+c+'">Remove</a></div>');
b("#relation-row-"+c).slideDown();b(".family-member-name, .family-member-relation").chosen();return false;});if(b.fn.chosen){b(".family-member-name, .family-member-relation").chosen();
}b("a.cn-add.cn-button").click(function(){var h=b(this);var g=h.attr("data-type");var c="#"+h.attr("data-container");var j="#"+g+"-template";var f=b(j).text();
var i=new Date();var e=Math.floor(Math.random()*i.getTime());f=f.replace(new RegExp("::FIELD::","gi"),e);b(c).append('<div class="widget '+g+'" id="'+g+"-row-"+e+'" style="display: none;">'+f+"</div>");
b("#"+g+"-row-"+e).slideDown();return false;});b("a.cn-remove.cn-button").live("click",function(){var e=b(this);var c=e.attr("data-token");var d=e.attr("data-type");
var f="#"+d+"-row-"+c;b(f).slideUp("fast",function(){b(this).remove();});return false;});jQuery("a#toggleBioEditor").click(function(){id="bio";if(tinyMCE.get(id)){tinyMCE.execCommand("mceRemoveControl",false,id);
}else{tinyMCE.execCommand("mceAddControl",false,id);}});jQuery("a#toggleNoteEditor").click(function(){id="note";if(tinyMCE.get(id)){tinyMCE.execCommand("mceRemoveControl",false,id);
}else{tinyMCE.execCommand("mceAddControl",false,id);}});if(b.fn.datepicker){b(".datepicker").live("focus",function(){b(this).datepicker({changeMonth:true,changeYear:true,showOtherMonths:true,selectOtherMonths:true,yearRange:"c-100:c+10"});
});}b("a.geocode.button").live("click",function(){var c=new Object();var g=b(this);var f;var d;var e=g.attr("data-uid");c.line_1=b("input[name=address\\["+e+"\\]\\[line_1\\]]").val();
c.line_2=b("input[name=address\\["+e+"\\]\\[line_2\\]]").val();c.line_3=b("input[name=address\\["+e+"\\]\\[line_3\\]]").val();c.city=b("input[name=address\\["+e+"\\]\\[city\\]]").val();
c.state=b("input[name=address\\["+e+"\\]\\[state\\]]").val();c.zipcode=b("input[name=address\\["+e+"\\]\\[zipcode\\]]").val();c.country=b("input[name=address\\["+e+"\\]\\[country\\]]").val();
b("#map-"+e).fadeIn("slow",function(){b("#map-"+e).goMap({maptype:"ROADMAP"});b.goMap.clearMarkers();b.goMap.createMarker({address:"'"+c.line_1+", "+c.city+", "+c.state+", "+c.zipcode+", '",id:"baseMarker",draggable:true});
b.goMap.setMap({address:"'"+c.line_1+", "+c.city+", "+c.state+", "+c.zipcode+", '",zoom:18});b.goMap.createListener({type:"marker",marker:"baseMarker"},"idle",function(i){var j=i.latLng.lat();
var h=i.latLng.lng();console.log(j);console.log(h);b("input[name=address\\["+e+"\\]\\[latitude\\]]").val(j);b("input[name=address\\["+e+"\\]\\[longitude\\]]").val(h);
});b.goMap.createListener({type:"marker",marker:"baseMarker"},"dragend",function(i){var j=i.latLng.lat();var h=i.latLng.lng();console.log(j);console.log(h);
b("input[name=address\\["+e+"\\]\\[latitude\\]]").val(j);b("input[name=address\\["+e+"\\]\\[longitude\\]]").val(h);});});setTimeout(function(){a(e);},1500);
return false;});function a(d){var c=b("#map-"+d).data("baseMarker").getPosition();b("input[name=address\\["+d+"\\]\\[latitude\\]]").val(c.lat());b("input[name=address\\["+d+"\\]\\[longitude\\]]").val(c.lng());
}});